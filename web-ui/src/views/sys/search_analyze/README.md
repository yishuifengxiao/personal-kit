# 搜索分析页面

## 功能概述

搜索分析页面用于记录和分析用户的搜索行为，帮助计算搜索质量指标，包括准确率(Accuracy)、精确率(Precision)、召回率(Recall)等关键性能指标。

## 主要功能

### 1. 搜索条件筛选
- **搜索关键词**: 支持模糊查询用户搜索的关键词
- **用户名称**: 支持模糊查询用户名称
- **搜索时间**: 支持时间范围选择，精确到秒
- **搜索按钮**: 执行筛选查询
- **重置按钮**: 清空所有筛选条件
- **导出按钮**: 将当前筛选结果导出为Excel文件

### 2. 统计信息展示
页面顶部显示四个关键统计指标：
- **总搜索次数**: 显示总的搜索记录数量
- **平均准确率**: 显示所有搜索的平均准确率（百分比）
- **平均精确率**: 显示所有搜索的平均精确率（百分比）
- **平均召回率**: 显示所有搜索的平均召回率（百分比）

### 3. 搜索记录列表
表格展示详细的搜索分析数据，包含以下字段：
- **用户名称**: 执行搜索的用户
- **搜索关键词**: 用户输入的搜索词
- **搜索时间**: 搜索执行的时间
- **结果总数**: 搜索引擎返回的结果数量
- **点击位置**: 用户点击的结果在列表中的位置
- **点击标题**: 用户点击的结果标题
- **是否点击**: 显示用户是否点击了搜索结果
- **准确率**: 以进度条形式展示准确率百分比
- **精确率**: 以进度条形式展示精确率百分比
- **召回率**: 以进度条形式展示召回率百分比
- **操作**: 提供详情查看和删除功能

### 4. 详情查看
点击"详情"按钮可查看单条搜索记录的详细信息，包含所有字段的完整数据。

### 5. 数据导出
支持将当前筛选条件下的所有数据导出为Excel文件，方便进一步分析。

### 6. 数据删除
支持删除单条搜索记录，操作前会有确认提示。

## 技术实现

### 前端技术
- **框架**: Vue 3 + Composition API
- **UI组件库**: Ant Design Vue
- **状态管理**: Pinia
- **HTTP请求**: Axios
- **构建工具**: Vite

### 后端接口
- **获取列表**: `POST /personkit/search/analyze/page`
- **导出数据**: `POST /personkit/search/analyze/export`
- **删除记录**: `DELETE /personkit/search/analyze/delete/{id}`

### 数据模型
```json
{
  "id": 1,                    // 记录ID
  "userName": "张三",         // 用户名称
  "keyword": "人工智能",      // 搜索关键词
  "searchTime": "2024-01-15 14:30:25",  // 搜索时间
  "totalResults": 156,        // 搜索结果总数
  "clickedPosition": 3,     // 点击位置
  "clickedTitle": "人工智能的发展历程",  // 点击标题
  "clickedResult": true,      // 是否点击
  "accuracy": 85.5,          // 准确率
  "precision": 78.2,        // 精确率
  "recall": 92.1             // 召回率
}
```

## 质量指标说明

### 准确率 (Accuracy)
正确预测的结果数 / 总预测结果数
反映整体预测的正确性

### 精确率 (Precision)
正确预测的正例数 / 预测为正例的总数
反映预测为正例的结果中有多少是真正的正例

### 召回率 (Recall)
正确预测的正例数 / 实际正例的总数
反映所有正例中有多少被正确预测出来

## 使用场景

1. **搜索质量监控**: 实时监控搜索引擎的性能表现
2. **用户体验优化**: 分析用户搜索行为，优化搜索算法
3. **数据分析报告**: 生成搜索质量分析报告
4. **系统性能评估**: 评估搜索系统的整体性能

## 注意事项

1. 时间参数使用北京时间格式（YYYY-MM-DD HH:mm:ss）
2. 所有百分比数据以0-100的数值形式展示
3. 导出功能需要处理文件流响应
4. 删除操作需要管理员权限
5. 数据收集需要在前端搜索功能中集成相应的数据收集逻辑