import{d as w,r as c,a as h,i as S,o as C,g as k,e as m,f as a,w as s,u as $,b as r,h as f}from"./index-1551c220.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{U}from"./UserOutlined-786bf086.js";const H=w({data(){const e=c({}),t=c([]),u=c([]),d=h(400),p=h({checkStrictly:!1,onChange:(l,o)=>{console.log(`selectedRowKeys: ${l}`,"selectedRows: ",o)},onSelect:(l,o,i)=>{console.log(l,o,i)},onSelectAll:(l,o,i)=>{console.log(l,o,i)}});return{formState:e,data:t,roleSource:u,rowSelection:p,tableHeight:d}},computed:{...S($,["tokenVal"]),tableData:function(){return this.data},headers:function(){return{Authorization:"xtoken "+this.tokenVal}},uploadUrl:function(){return this.$cfg.rootUrl()+"/personkit/disk/file/import"}},methods:{handleFinish(){this.query()},handleReset(){this.formState=c({}),this.pagination.current=1,this.query()},query(){this.$http.request({url:"/personkit/sys/permission/page",data:{num:this.pagination.current,query:this.formState,size:this.pagination.pageSize}}).then(e=>{this.pagination.current=e.num,this.pagination.total=e.total,this.data=c(e.data)}).catch(e=>console.log(e))},calculateTableHeight(){const e=window.innerHeight,t=120,u=60,d=40,p=e-t-u-d;this.tableHeight=Math.max(300,Math.min(600,p))},handleResize(){this.calculateTableHeight()},handleChange(e){e.file.status!=="uploading"&&console.log(e.file,e.fileList),e.file.status==="done"?this.$msg.success(`${e.file.name} file uploaded successfully`):e.file.status==="error"&&this.$msg.error(`${e.file.name} file upload failed.`),this.query()},onPaginationChange(e,t){this.pagination.current=e,this.query()},showDetail(e){sessionStorage.setItem("current_view_file",JSON.stringify(e)),this.$router.push({name:"data_source_detail",query:{record:e.id}})}},components:{UserOutlined:U},mounted(){this.query(),this.calculateTableHeight(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},setup(){const e=[{title:"应用名称",dataIndex:"applicationName",key:"applicationName",align:"center"},{title:"资源路径",dataIndex:"url",key:"url",ellipsis:!0,align:"center"},{title:"请求方法",dataIndex:"httpMethod",key:"httpMethod",ellipsis:!0,align:"center"},{title:"模块名称",dataIndex:"module",key:"module",align:"center"},{title:"资源名称",dataIndex:"name",key:"name",ellipsis:!0,align:"center"},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0,align:"center"}],t={current:1,total:0,pageSize:10},u=h([]),d={style:{width:"80px"}},p={span:14},l=c([{label:"需要鉴权",value:1},{label:"无需鉴权",value:0}]);return{columns:e,pagination:t,fileList:u,labelCol:d,wrapperCol:p,statusOptions:l}}}),I={class:"page-content-wrapper medium-data-table"},q={class:"search-area"},N={class:"content-min-height"},R={class:"table-container"},V={style:{"margin-top":"15px",float:"right"}};function F(e,t,u,d,p,l){const o=r("a-input"),i=r("a-form-item"),g=r("a-button"),_=r("a-space"),b=r("a-form"),v=r("a-table"),y=r("a-pagination");return C(),k("div",I,[m("div",q,[a(b,{layout:"inline",name:"basic",autocomplete:"off",model:e.formState,onFinish:e.handleFinish,"label-col":e.labelCol},{default:s(()=>[a(i,{label:"应用名称",name:"applicationName",class:"input"},{default:s(()=>[a(o,{allowClear:"",value:e.formState.applicationName,"onUpdate:value":t[0]||(t[0]=n=>e.formState.applicationName=n),placeholder:"应用名称，模糊查询"},null,8,["value"])]),_:1}),a(i,{label:"模块名称",name:"模块名称",class:"input"},{default:s(()=>[a(o,{allowClear:"",value:e.formState.module,"onUpdate:value":t[1]||(t[1]=n=>e.formState.module=n),placeholder:"模块名称，模糊查询"},null,8,["value"])]),_:1}),a(i,{label:"资源名称",name:"name",class:"input"},{default:s(()=>[a(o,{allowClear:"",value:e.formState.name,"onUpdate:value":t[2]||(t[2]=n=>e.formState.name=n),placeholder:"资源名称，模糊查询"},null,8,["value"])]),_:1}),a(i,{label:"资源路径",name:"url",class:"input"},{default:s(()=>[a(o,{allowClear:"",value:e.formState.url,"onUpdate:value":t[3]||(t[3]=n=>e.formState.url=n),placeholder:"资源路径，模糊查询"},null,8,["value"])]),_:1}),a(_,{class:"input"},{default:s(()=>[a(g,{type:"primary","html-type":"submit"},{default:s(()=>[...t[5]||(t[5]=[f(" 搜索 ",-1)])]),_:1}),a(g,{onClick:e.handleReset},{default:s(()=>[...t[6]||(t[6]=[f(" 重置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","onFinish","label-col"])]),m("div",N,[m("div",R,[a(v,{columns:e.columns,"data-source":e.tableData,pagination:!1,scroll:{x:1500},size:"small"},null,8,["columns","data-source"])]),m("div",V,[a(y,{current:e.pagination.current,"onUpdate:current":t[4]||(t[4]=n=>e.pagination.current=n),total:e.pagination.total,"show-total":n=>`共 ${n} 条数据`,onChange:e.onPaginationChange},null,8,["current","total","show-total","onChange"])])])])}const B=z(H,[["render",F],["__scopeId","data-v-4ca323eb"]]);export{B as default};
