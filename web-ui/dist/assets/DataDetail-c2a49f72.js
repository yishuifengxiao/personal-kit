import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{d as N,o as r,g as c,e as o,h as p,f as i,w as u,c as m,l as g,b as l,F as k,j as D,t as s}from"./index-507fc7e9.js";const w=N({props:{record:String},data(){return{result:{headers:[],page:{data:[],empty:!0,num:1,pages:0,size:10,total:0}}}},computed:{colDefines:function(){return this.result.headers.map(e=>{const t=e.name===null?"":e.name;return{title:t,dataIndex:t,key:t,align:"left"}})},tableData:function(){const e=this.result.page.data;return typeof e>"u"||e===null?[]:e.map(t=>{let n={};for(let d of t.cells)n[d.columnName]=d.text;return n.___data=t,n})}},methods:{query(){this.$http.request({url:"/personkit/data/center/view",data:{num:this.result.page.num,query:{virtuallyFileId:this.currentFileId},size:10}}).then(e=>{this.result=e}).catch(e=>console.log(e))},onPaginationChange(e,t){this.result.page.num=e,this.query()},onSelectChange(e){this.currentFileId=e,this.currentFile=this.allRecord.files.filter(t=>t.virtualFileId===this.currentFileId)[0],this.query()}},mounted(){console.log("--------------------- 2222222 "),this.query()},setup(){console.log("--------------------- 111111 ");const e=JSON.parse(sessionStorage.getItem("current_view_file")),t=e.files[0],n=e.files[0].virtualFileId;return{allRecord:e,currentFile:t,currentFileId:n}}}),S={key:0},b={style:{"margin-top":"15px",float:"right"}};function q(e,t,n,d,$,B){const f=l("a-select-option"),h=l("a-select"),_=l("a-space"),F=l("a-divider"),y=l("a-table"),v=l("a-pagination");return r(),c("div",null,[o("div",null,[t[2]||(t[2]=p(" 当前文件名称: ",-1)),i(h,{value:e.currentFileId,"onUpdate:value":t[0]||(t[0]=a=>e.currentFileId=a),style:{width:"20rem"},onChange:e.onSelectChange},{default:u(()=>[(r(!0),c(k,null,D(e.allRecord.files,a=>(r(),m(f,{value:a.virtualFileId,key:a.virtualFileId},{default:u(()=>[p(s(a.virtualFileName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"]),i(_,{style:{"margin-left":"10rem",float:"right"}},{default:u(()=>[o("span",null,"上传数据总数:"+s(e.currentFile.uploadNum),1),o("span",null,"有效数据总数:"+s(e.currentFile.actualTotalNum),1),o("span",null,"上传时间 "+s(e.currentFile.createTime),1)]),_:1})]),i(F),e.colDefines.length>0?(r(),m(y,{key:0,columns:e.colDefines,"data-source":e.tableData,pagination:!1},{bodyCell:u(({column:a,text:I})=>[typeof a.dataIndex<"u"&&a.dataIndex==="name"?(r(),c("a",S,s(I),1)):g("",!0)]),_:1},8,["columns","data-source"])):g("",!0),o("div",b,[i(v,{current:e.result.page.num,"onUpdate:current":t[1]||(t[1]=a=>e.result.page.num=a),total:e.result.page.total,"show-total":a=>`共 ${a} 条数据`,onChange:e.onPaginationChange},null,8,["current","total","show-total","onChange"])])])}const R=C(w,[["render",q]]);export{R as default};
