import{f as s,A as R,R as be,O as Ae,Q as _e,T as xe,U as ye,V as Ce,E as Fe,p as Me,W as ke,a as m,I as ie,r as $,z as Se,o as f,g as M,e as r,w as u,F as se,j as re,n as Te,s as de,l as ce,k as h,M as ue,X as Pe,b as d,c as k,t as U,h as D,y as ze}from"./index-8cadae33.js";import{_ as Ue}from"./_plugin-vue_export-helper-c27b6911.js";import{F as De,a as Ve,b as Ie,c as je}from"./FolderTwoTone-73ecf396.js";var He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};const Le=He;function me(l){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),n.forEach(function(c){Ee(l,c,o[c])})}return l}function Ee(l,e,o){return e in l?Object.defineProperty(l,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[e]=o,l}var ee=function(e,o){var n=me({},e,o.attrs);return s(R,me({},n,{icon:Le}),null)};ee.displayName="FolderAddOutlined";ee.inheritAttrs=!1;const Ne=ee;var Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]},name:"scissor",theme:"outlined"};const Re=Be;function pe(l){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),n.forEach(function(c){We(l,c,o[c])})}return l}function We(l,e,o){return e in l?Object.defineProperty(l,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[e]=o,l}var ne=function(e,o){var n=pe({},e,o.attrs);return s(R,pe({},n,{icon:Re}),null)};ne.displayName="ScissorOutlined";ne.inheritAttrs=!1;const qe=ne;var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z"}}]},name:"snippets",theme:"outlined"};const Ge=Xe;function fe(l){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),n.forEach(function(c){Qe(l,c,o[c])})}return l}function Qe(l,e,o){return e in l?Object.defineProperty(l,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[e]=o,l}var te=function(e,o){var n=fe({},e,o.attrs);return s(R,fe({},n,{icon:Ge}),null)};te.displayName="SnippetsOutlined";te.inheritAttrs=!1;const Ye=te;var Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Ze=Je;function ve(l){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),n.forEach(function(c){Ke(l,c,o[c])})}return l}function Ke(l,e,o){return e in l?Object.defineProperty(l,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[e]=o,l}var oe=function(e,o){var n=ve({},e,o.attrs);return s(R,ve({},n,{icon:Ze}),null)};oe.displayName="UploadOutlined";oe.inheritAttrs=!1;const $e=oe;const en={name:"PersonalCloud",components:{UploadOutlined:$e,FolderAddOutlined:Ne,ReloadOutlined:be,SwapOutlined:Ae,FolderTwoTone:De,FileTwoTone:_e,FileImageTwoTone:Ve,FileTextTwoTone:Ie,FilePdfTwoTone:je,FolderOpenOutlined:xe,DownloadOutlined:ye,CopyOutlined:Ce,ScissorOutlined:qe,SnippetsOutlined:Ye,EditOutlined:Fe,DeleteOutlined:Me,InfoCircleOutlined:ke},setup(){const l=m("/"),e=ie(()=>["根目录",...l.value.split("/").filter(Boolean)]),o=m([{id:1,name:"文档",type:"folder",size:0,updatedAt:"2024-01-15 10:30:00",path:"/文档"},{id:2,name:"图片",type:"folder",size:0,updatedAt:"2024-01-14 15:20:00",path:"/图片"},{id:3,name:"项目报告.pdf",type:"file",size:2048576,updatedAt:"2024-01-13 09:15:00",path:"/项目报告.pdf"},{id:4,name:"会议记录AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.txt",type:"file",size:10240,updatedAt:"2024-01-12 14:30:00",path:"/会议记录.txt"},{id:5,name:"产品截图.png",type:"file",size:524288,updatedAt:"2024-01-11 16:45:00",path:"/产品截图.png"}]),n=m(!1),c=m(""),_=m([]),g=m(!1),S=$({x:0,y:0}),x=m(null),v=m(null),y=m(""),V=m(!1),I=m(!1),C=m(!1),W=m(!1),j=m(!1),b=$({name:""}),A=$({name:""}),T=m(null),q=ie(()=>{if(!c.value)return o.value;const t=c.value.toLowerCase();return o.value.filter(i=>i.name.toLowerCase().includes(t))}),H=t=>{if(t===0)return"0 B";const i=1024,p=["B","KB","MB","GB"],J=Math.floor(Math.log(t)/Math.log(i));return parseFloat((t/Math.pow(i,J)).toFixed(2))+" "+p[J]},P=t=>t,X=t=>{if(t===0)l.value="/";else{const p="/"+l.value.split("/").filter(Boolean).slice(0,t).join("/");l.value=p}w()},w=()=>{n.value=!0,setTimeout(()=>{n.value=!1,h.success("文件列表已刷新")},500)},G=()=>{h.success("文件上传成功"),V.value=!1,w()},Q=()=>{if(!A.name.trim()){h.warning("请输入文件夹名称");return}const t={id:Date.now(),name:A.name,type:"folder",size:0,updatedAt:new Date().toLocaleString("zh-CN"),path:l.value+"/"+A.name};o.value.unshift(t),h.success("文件夹创建成功"),I.value=!1,A.name=""},Y=()=>{if(!b.name.trim()){h.warning("请输入新名称");return}T.value&&(T.value.name=b.name,h.success("重命名成功"),C.value=!1,b.name="")},L=t=>{ue.confirm({title:"确认删除",content:`确定要删除 "${t.name}" 吗？`,onOk(){const i=o.value.findIndex(p=>p.id===t.id);i>-1&&(o.value.splice(i,1),h.success("删除成功"))}})},F=t=>{h.success(`开始下载 ${t.name}`);const i=document.createElement("a");i.href="#",i.download=t.name,i.click()},z=t=>[".jpg",".jpeg",".png",".gif",".bmp",".svg"].some(p=>t.toLowerCase().endsWith(p)),E=t=>[".txt",".md",".json",".xml",".csv",".log"].some(p=>t.toLowerCase().endsWith(p)),N=t=>t.toLowerCase().endsWith(".pdf"),B=(t,i)=>{i.preventDefault(),x.value=t,g.value=!0,Pe(()=>{let Z=i.clientX,K=i.clientY;Z+180>window.innerWidth&&(Z=window.innerWidth-180-10),K+250>window.innerHeight&&(K=window.innerHeight-250-10),S.x=Z,S.y=K})},a=t=>{O(t)},O=t=>{const i=x.value;if(i){switch(t){case"open":i.type==="folder"?(l.value=i.path,w()):F(i);break;case"download":F(i);break;case"copy":v.value=i,y.value="copy",h.success("已复制到剪贴板");break;case"cut":v.value=i,y.value="cut",h.success("已剪切到剪贴板");break;case"paste":v.value&&i.type==="folder"&&(h.success("粘贴成功"),v.value=null,y.value="");break;case"rename":T.value=i,b.name=i.name,C.value=!0;break;case"delete":L(i);break;case"properties":ae(i);break}g.value=!1}},le=(t,i)=>{if(i.ctrlKey||i.metaKey){const p=_.value.indexOf(t.id);p>-1?_.value.splice(p,1):_.value.push(t.id)}else _.value=[t.id]},he=t=>{t.type==="folder"?(l.value=t.path,w()):F(t)},Oe=()=>{},ae=t=>{const i=document.createElement("div");i.style.marginTop="16px",i.innerHTML=`
        <p><strong>名称：</strong>${t.name}</p>
        <p><strong>类型：</strong>${t.type==="folder"?"文件夹":"文件"}</p>
        ${t.type!=="folder"?`<p><strong>大小：</strong>${H(t.size)}</p>`:""}
        <p><strong>修改时间：</strong>${t.updatedAt}</p>
        <p><strong>路径：</strong>${t.path}</p>
      `,ue.info({title:"文件属性",content:i,width:400})},we=t=>!1;Se(()=>{w()});const ge=t=>{if(g.value){const i=document.querySelector(".context-menu");i&&!i.contains(t.target)&&(g.value=!1)}};return typeof document<"u"&&document.addEventListener("click",ge),{currentPath:l,breadcrumbs:e,fileList:o,loading:n,searchValue:c,selectedItems:_,showContextMenu:g,contextMenuPosition:S,contextMenuTarget:x,clipboardItem:v,clipboardAction:y,showUploadModal:V,showNewFolderModal:I,showRenameModal:C,showMoveCopyModal:W,showDeleteModal:j,renameForm:b,newFolderForm:A,filteredFileList:q,formatFileSize:H,formatDate:P,navigateToPath:X,refreshFiles:w,handleUpload:G,handleNewFolder:Q,handleRename:Y,handleDelete:L,downloadFile:F,isImage:z,isText:E,isPDF:N,handleRowContextMenu:B,handleContextMenu:a,handleContextMenuAction:O,handleItemClick:le,handleItemDoubleClick:he,handleSearch:Oe,showRenameModal:C,showDeleteModal:j,showPropertiesModal:ae,beforeUpload:we}}},nn={class:"personal-cloud"},tn={class:"toolbar"},on={class:"toolbar-left"},ln=["onClick"],an={class:"toolbar-actions"},sn={class:"toolbar-right"},rn={class:"file-grid-container"},dn={class:"file-grid"},cn=["onClick","onDblclick","onContextmenu"],un={class:"file-thumbnail"},mn={class:"file-info"},pn=["title"],fn={class:"file-hover-info"},vn={class:"hover-file-name"},hn={key:0,class:"hover-file-size"},On={class:"hover-file-date"};function wn(l,e,o,n,c,_){const g=d("a-breadcrumb-item"),S=d("a-breadcrumb"),x=d("UploadOutlined"),v=d("a-button"),y=d("FolderAddOutlined"),V=d("ReloadOutlined"),I=d("SwapOutlined"),C=d("a-input-search"),W=d("FolderTwoTone"),j=d("FileImageTwoTone"),b=d("FileTextTwoTone"),A=d("FilePdfTwoTone"),T=d("FileTwoTone"),q=d("FolderOpenOutlined"),H=d("DownloadOutlined"),P=d("a-divider"),X=d("CopyOutlined"),w=d("ScissorOutlined"),G=d("SnippetsOutlined"),Q=d("EditOutlined"),Y=d("DeleteOutlined"),L=d("InfoCircleOutlined"),F=d("a-upload"),z=d("a-modal"),E=d("a-input"),N=d("a-form-item"),B=d("a-form");return f(),M("div",nn,[r("div",tn,[r("div",on,[s(S,{class:"breadcrumb"},{default:u(()=>[(f(!0),M(se,null,re(n.breadcrumbs,(a,O)=>(f(),k(g,{key:O},{default:u(()=>[r("a",{onClick:le=>n.navigateToPath(O)},U(a),9,ln)]),_:2},1024))),128))]),_:1}),r("div",an,[s(v,{type:"primary",onClick:e[0]||(e[0]=a=>n.showUploadModal=!0)},{icon:u(()=>[s(x)]),default:u(()=>[e[21]||(e[21]=D(" 上传文件 ",-1))]),_:1}),s(v,{onClick:e[1]||(e[1]=a=>n.showNewFolderModal=!0)},{icon:u(()=>[s(y)]),default:u(()=>[e[22]||(e[22]=D(" 新建文件夹 ",-1))]),_:1}),s(v,{onClick:n.refreshFiles},{icon:u(()=>[s(V)]),default:u(()=>[e[23]||(e[23]=D(" 刷新 ",-1))]),_:1},8,["onClick"]),s(v,{onClick:e[2]||(e[2]=a=>l.$router.push({name:"transport_list"}))},{icon:u(()=>[s(I)]),default:u(()=>[e[24]||(e[24]=D(" 传输列表 ",-1))]),_:1})])]),r("div",sn,[s(C,{value:n.searchValue,"onUpdate:value":e[3]||(e[3]=a=>n.searchValue=a),placeholder:"搜索文件...",style:{width:"250px"},onSearch:n.handleSearch,onChange:n.handleSearch,"allow-clear":""},null,8,["value","onSearch","onChange"])])]),r("div",rn,[r("div",dn,[(f(!0),M(se,null,re(n.filteredFileList,a=>(f(),M("div",{key:a.id,class:de(["file-grid-item",{selected:n.selectedItems.includes(a.id)}]),onClick:O=>n.handleItemClick(a,O),onDblclick:O=>n.handleItemDoubleClick(a),onContextmenu:ze(O=>n.handleRowContextMenu(a,O),["prevent"])},[r("div",un,[a.type==="folder"?(f(),k(W,{key:0,class:"file-icon folder-icon","two-tone-color":"#1890ff"})):n.isImage(a.name)?(f(),k(j,{key:1,class:"file-icon image-icon","two-tone-color":"#52c41a"})):n.isText(a.name)?(f(),k(b,{key:2,class:"file-icon text-icon","two-tone-color":"#722ed1"})):n.isPDF(a.name)?(f(),k(A,{key:3,class:"file-icon pdf-icon","two-tone-color":"#ff4d4f"})):(f(),k(T,{key:4,class:"file-icon file-icon","two-tone-color":"#fa8c16"}))]),r("div",mn,[r("div",{class:"file-name",title:a.name},U(a.name),9,pn)]),r("div",fn,[r("div",vn,U(a.name),1),a.type!=="folder"?(f(),M("div",hn,U(n.formatFileSize(a.size)),1)):ce("",!0),r("div",On,U(n.formatDate(a.updatedAt)),1)])],42,cn))),128))])]),n.showContextMenu?(f(),M("div",{key:0,class:"context-menu",style:Te({left:n.contextMenuPosition.x+"px",top:n.contextMenuPosition.y+"px"}),onMouseleave:e[12]||(e[12]=a=>n.showContextMenu=!1)},[r("div",{class:"context-menu-item",onClick:e[4]||(e[4]=a=>n.handleContextMenuAction("open"))},[s(q),e[25]||(e[25]=r("span",null,"打开",-1))]),r("div",{class:"context-menu-item",onClick:e[5]||(e[5]=a=>n.handleContextMenuAction("download"))},[s(H),e[26]||(e[26]=r("span",null,"下载",-1))]),s(P,{style:{margin:"4px 0"}}),r("div",{class:"context-menu-item",onClick:e[6]||(e[6]=a=>n.handleContextMenuAction("copy"))},[s(X),e[27]||(e[27]=r("span",null,"复制",-1))]),r("div",{class:"context-menu-item",onClick:e[7]||(e[7]=a=>n.handleContextMenuAction("cut"))},[s(w),e[28]||(e[28]=r("span",null,"剪切",-1))]),r("div",{class:de(["context-menu-item",{disabled:!n.clipboardItem}]),onClick:e[8]||(e[8]=a=>n.handleContextMenuAction("paste"))},[s(G),e[29]||(e[29]=r("span",null,"粘贴",-1))],2),s(P,{style:{margin:"4px 0"}}),r("div",{class:"context-menu-item",onClick:e[9]||(e[9]=a=>n.handleContextMenuAction("rename"))},[s(Q),e[30]||(e[30]=r("span",null,"重命名",-1))]),r("div",{class:"context-menu-item",onClick:e[10]||(e[10]=a=>n.handleContextMenuAction("delete"))},[s(Y),e[31]||(e[31]=r("span",null,"删除",-1))]),s(P,{style:{margin:"4px 0"}}),r("div",{class:"context-menu-item",onClick:e[11]||(e[11]=a=>n.handleContextMenuAction("properties"))},[s(L),e[32]||(e[32]=r("span",null,"属性",-1))])],36)):ce("",!0),s(z,{open:n.showUploadModal,"onUpdate:open":e[13]||(e[13]=a=>n.showUploadModal=a),title:"上传文件",onOk:n.handleUpload,onCancel:e[14]||(e[14]=a=>n.showUploadModal=!1)},{default:u(()=>[s(F,{"file-list":n.fileList,"before-upload":n.beforeUpload,multiple:""},{default:u(()=>[s(v,null,{default:u(()=>[s(x),e[33]||(e[33]=D(" 选择文件 ",-1))]),_:1})]),_:1},8,["file-list","before-upload"])]),_:1},8,["open","onOk"]),s(z,{open:n.showNewFolderModal,"onUpdate:open":e[16]||(e[16]=a=>n.showNewFolderModal=a),title:"新建文件夹",onOk:n.handleNewFolder,onCancel:e[17]||(e[17]=a=>n.showNewFolderModal=!1)},{default:u(()=>[s(B,{model:n.newFolderForm,layout:"vertical"},{default:u(()=>[s(N,{label:"文件夹名称",required:""},{default:u(()=>[s(E,{value:n.newFolderForm.name,"onUpdate:value":e[15]||(e[15]=a=>n.newFolderForm.name=a),placeholder:"请输入文件夹名称"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","onOk"]),s(z,{open:n.showRenameModal,"onUpdate:open":e[19]||(e[19]=a=>n.showRenameModal=a),title:"重命名",onOk:n.handleRename,onCancel:e[20]||(e[20]=a=>n.showRenameModal=!1)},{default:u(()=>[s(B,{model:n.renameForm,layout:"vertical"},{default:u(()=>[s(N,{label:"新名称",required:""},{default:u(()=>[s(E,{value:n.renameForm.name,"onUpdate:value":e[18]||(e[18]=a=>n.renameForm.name=a),placeholder:"请输入新名称"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","onOk"])])}const _n=Ue(en,[["render",wn],["__scopeId","data-v-de97563a"]]);export{_n as default};
