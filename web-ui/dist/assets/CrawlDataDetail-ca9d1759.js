import{d as M,N as L,k as N,i as U,a as D,r as O,O as R,o as m,g as B,e as n,f as o,w as a,t as r,y as S,b as c,h as d,c as g,s as T}from"./index-64e3746b.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";import{E}from"./ExportOutlined-c7b044d9.js";const J=M({name:"CrawlDataDetail",components:{ArrowLeftOutlined:L,ExportOutlined:E},setup(){const t=N();U();const s=t.params.spiderId,$=t.params.recordId,z=D({crawlTime:"2024-01-15 14:30:00",status:"success",dataType:"文章",dataCount:125,duration:180,startUrl:"https://example.com/page1",endUrl:"https://example.com/page125",errorMsg:"",log:""}),k=D([]),_=D(!1),b=[{title:"数据ID",dataIndex:"id",key:"id",width:120},{title:"页面URL",dataIndex:"url",key:"url",width:300,ellipsis:!0},{title:"抓取时间",dataIndex:"crawlTime",key:"crawlTime",width:160},{title:"数据内容",dataIndex:"content",key:"content",ellipsis:!0},{title:"操作",key:"action",width:100,fixed:"right"}],l=O({current:1,pageSize:20,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条数据`}),w=R(()=>({...l,pageSizeOptions:["10","20","50","100"]})),i=e=>({success:"success",failed:"error",partial:"warning"})[e]||"default",C=e=>({success:"成功",failed:"失败",partial:"部分成功"})[e]||e,I=e=>typeof e=="string"?e.length>100?e.substring(0,100)+"...":e:JSON.stringify(e).substring(0,100)+"...",h=()=>{const e=[];for(let u=1;u<=125;u++)e.push({id:`data_${u}`,url:`https://example.com/article/${u}`,crawlTime:`2024-01-15 14:${String(Math.floor(Math.random()*60)).padStart(2,"0")}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}`,content:{title:`文章标题 ${u}`,author:`作者${u}`,publishTime:"2024-01-15",summary:"这是一篇测试文章的内容摘要，包含了文章的主要信息..."}});return e},y=()=>{_.value=!0,setTimeout(()=>{const e=h();k.value=e.slice((l.current-1)*l.pageSize,l.current*l.pageSize),l.total=e.length,_.value=!1},500)},v=e=>{l.current=e.current,l.pageSize=e.pageSize,y()},f=e=>{S.info(`查看数据详情: ${e.id}`)},p=()=>{S.info("正在导出抓取数据..."),setTimeout(()=>{S.success("抓取数据导出成功")},1e3)};return y(),{spiderId:s,recordId:$,recordInfo:z,dataList:k,loading:_,columns:b,paginationConfig:w,getStatusColor:i,getStatusText:C,formatContent:I,handleTableChange:v,viewDataDetail:f,exportData:p}}}),A={class:"crawl-data-detail-container"},K={class:"page-header"},Q={class:"header-left"},j={class:"header-actions"},q={class:"basic-info"},x={class:"error-msg"},F={class:"crawl-log"},G={class:"data-list"},H={class:"list-header"},P={class:"data-count"},W={class:"url-text"},X={class:"content-text"};function Y(t,s,$,z,k,_){const b=c("arrow-left-outlined"),l=c("a-button"),w=c("export-outlined"),i=c("a-descriptions-item"),C=c("a-tag"),I=c("a-descriptions"),h=c("a-tooltip"),y=c("a-space"),v=c("a-table");return m(),B("div",A,[n("div",K,[n("div",Q,[o(l,{onClick:s[0]||(s[0]=f=>t.$router.back()),class:"back-btn"},{default:a(()=>[o(b),s[1]||(s[1]=d(" 返回 ",-1))]),_:1}),s[2]||(s[2]=n("span",{class:"page-title"},"抓取数据详情",-1))]),n("div",j,[o(l,{type:"primary",onClick:t.exportData},{default:a(()=>[o(w),s[3]||(s[3]=d(" 导出数据 ",-1))]),_:1},8,["onClick"])])]),n("div",q,[o(I,{column:2,size:"small",bordered:""},{default:a(()=>[o(i,{label:"记录ID"},{default:a(()=>[d(r(t.recordId),1)]),_:1}),o(i,{label:"抓取时间"},{default:a(()=>[d(r(t.recordInfo.crawlTime),1)]),_:1}),o(i,{label:"抓取状态"},{default:a(()=>[o(C,{color:t.getStatusColor(t.recordInfo.status)},{default:a(()=>[d(r(t.getStatusText(t.recordInfo.status)),1)]),_:1},8,["color"])]),_:1}),o(i,{label:"数据类型"},{default:a(()=>[d(r(t.recordInfo.dataType),1)]),_:1}),o(i,{label:"抓取数量"},{default:a(()=>[d(r(t.recordInfo.dataCount)+" 条",1)]),_:1}),o(i,{label:"耗时"},{default:a(()=>[d(r(t.recordInfo.duration)+" 秒",1)]),_:1}),o(i,{label:"起始URL",span:2},{default:a(()=>[d(r(t.recordInfo.startUrl),1)]),_:1}),o(i,{label:"结束URL",span:2},{default:a(()=>[d(r(t.recordInfo.endUrl),1)]),_:1}),t.recordInfo.errorMsg?(m(),g(i,{key:0,label:"错误信息",span:2},{default:a(()=>[n("div",x,r(t.recordInfo.errorMsg),1)]),_:1})):T("",!0),t.recordInfo.log?(m(),g(i,{key:1,label:"抓取日志",span:2},{default:a(()=>[n("div",F,r(t.recordInfo.log),1)]),_:1})):T("",!0)]),_:1})]),n("div",G,[n("div",H,[s[4]||(s[4]=n("h3",null,"抓取数据列表",-1)),n("span",P,"共 "+r(t.dataList.length)+" 条数据",1)]),o(v,{columns:t.columns,"data-source":t.dataList,pagination:t.paginationConfig,loading:t.loading,rowKey:"id",size:"middle",onChange:t.handleTableChange},{bodyCell:a(({column:f,record:p})=>[f.key==="url"?(m(),g(h,{key:0,title:p.url},{default:a(()=>[n("span",W,r(p.url),1)]),_:2},1032,["title"])):f.key==="content"?(m(),g(h,{key:1,title:JSON.stringify(p.content,null,2)},{default:a(()=>[n("span",X,r(t.formatContent(p.content)),1)]),_:2},1032,["title"])):f.key==="action"?(m(),g(y,{key:2},{default:a(()=>[o(l,{type:"link",size:"small",onClick:e=>t.viewDataDetail(p)},{default:a(()=>[...s[5]||(s[5]=[d(" 查看详情 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)):T("",!0)]),_:1},8,["columns","data-source","pagination","loading","onChange"])])])}const at=V(J,[["render",Y],["__scopeId","data-v-582e8c9f"]]);export{at as default};
