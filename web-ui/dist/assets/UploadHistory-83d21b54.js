import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{d as x,r as u,k as g,o as p,g as c,e as h,f as a,w as n,b as i,h as l,c as y,t as _,l as f,F as q}from"./index-3cf98693.js";const T=x({data(){const e=u({fileName:"",stat:""}),t=u([]);return{formState:e,data:t}},computed:{tableData:function(){return this.data}},methods:{handleFinish(){this.query()},query(){const e={num:String(this.pagination.current),size:String(this.pagination.pageSize),query:{}};this.formState.fileName&&(e.query.fileName=this.formState.fileName),this.formState.stat!==""&&(e.query.stat=this.formState.stat),this.$http.request({url:"/personkit/upload/record",data:e}).then(t=>{this.pagination.current=t.num||1,this.pagination.total=t.total||0,this.data=u(t.data||[])}).catch(t=>{console.error("获取上传历史失败:",t),g.error("获取上传历史失败: "+(t.message||"未知错误"))})},handleReset(){this.formState=u({fileName:"",stat:""}),this.pagination.current=1,this.query()},getStatusColor(e){return{0:"processing",1:"success",2:"error"}[e]||"default"},getStatusText(e){return{0:"上传中",1:"上传成功",2:"上传失败"}[e]||"未知"},getUploadModeText(e){return{0:"仅上传",1:"上传且解析"}[e]||"未知"},showDetail(e){console.log("查看详情:",e),g.info("详情功能开发中...")},onPaginationChange(e,t){this.pagination.current=e,this.pagination.pageSize=t,this.query()}},mounted(){this.query()},setup(){return{columns:[{title:"文件名称",dataIndex:"fileName",key:"fileName",align:"center",ellipsis:!0},{title:"文件夹",dataIndex:"folderName",key:"folderName",align:"center",ellipsis:!0},{title:"用户ID",dataIndex:"userId",key:"userId",align:"center",width:100},{title:"状态",dataIndex:"stat",key:"stat",align:"center",width:100},{title:"上传模式",dataIndex:"uploadMode",key:"uploadMode",align:"center",width:120},{title:"消息",dataIndex:"msg",key:"msg",align:"center",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",align:"center",width:180},{title:"完成时间",dataIndex:"finishTime",key:"finishTime",align:"center",width:180},{title:"操作",dataIndex:"action",key:"action",align:"center",width:100}],pagination:{current:1,total:0,pageSize:10}}}}),$={style:{display:"flex","justify-content":"space-between","align-items":"center"}},D={style:{"margin-top":"15px",float:"right"}};function F(e,t,U,z,B,V){const k=i("a-input"),r=i("a-form-item"),d=i("a-select-option"),S=i("a-select"),m=i("a-button"),v=i("a-form"),N=i("a-divider"),b=i("a-tag"),C=i("a-space"),I=i("a-table"),w=i("a-pagination");return p(),c("div",null,[h("div",$,[a(v,{layout:"inline",name:"basic",autocomplete:"off",model:e.formState,onFinish:e.handleFinish},{default:n(()=>[a(r,{label:"文件名",name:"fileName"},{default:n(()=>[a(k,{value:e.formState.fileName,"onUpdate:value":t[0]||(t[0]=o=>e.formState.fileName=o),placeholder:"文件名，模糊查询"},null,8,["value"])]),_:1}),a(r,{label:"状态",name:"stat"},{default:n(()=>[a(S,{value:e.formState.stat,"onUpdate:value":t[1]||(t[1]=o=>e.formState.stat=o),placeholder:"请选择状态",style:{width:"120px"}},{default:n(()=>[a(d,{value:""},{default:n(()=>[...t[3]||(t[3]=[l("全部",-1)])]),_:1}),a(d,{value:"0"},{default:n(()=>[...t[4]||(t[4]=[l("上传中",-1)])]),_:1}),a(d,{value:"1"},{default:n(()=>[...t[5]||(t[5]=[l("上传成功",-1)])]),_:1}),a(d,{value:"2"},{default:n(()=>[...t[6]||(t[6]=[l("上传失败",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),a(r,null,{default:n(()=>[a(m,{type:"primary","html-type":"submit"},{default:n(()=>[...t[7]||(t[7]=[l(" 搜索 ",-1)])]),_:1})]),_:1}),a(r,null,{default:n(()=>[a(m,{onClick:e.handleReset},{default:n(()=>[...t[8]||(t[8]=[l(" 重置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","onFinish"])]),a(N,{dashed:""}),a(I,{columns:e.columns,"data-source":e.tableData,size:"small",pagination:!1},{bodyCell:n(({column:o,record:s})=>[o.dataIndex==="stat"?(p(),y(b,{key:0,color:e.getStatusColor(s.stat)},{default:n(()=>[l(_(e.getStatusText(s.stat)),1)]),_:2},1032,["color"])):f("",!0),o.dataIndex==="uploadMode"?(p(),c(q,{key:1},[l(_(e.getUploadModeText(s.uploadMode)),1)],64)):f("",!0),o.dataIndex==="action"?(p(),y(C,{key:2},{default:n(()=>[a(m,{type:"link",onClick:P=>e.showDetail(s),disabled:s.stat!==1},{default:n(()=>[...t[9]||(t[9]=[l(" 详情 ",-1)])]),_:1},8,["onClick","disabled"])]),_:2},1024)):f("",!0)]),_:1},8,["columns","data-source"]),h("div",D,[a(w,{current:e.pagination.current,"onUpdate:current":t[2]||(t[2]=o=>e.pagination.current=o),total:e.pagination.total,"show-total":o=>`共 ${o} 条数据`,onChange:e.onPaginationChange},null,8,["current","total","show-total","onChange"])])])}const E=M(T,[["render",F]]);export{E as default};
