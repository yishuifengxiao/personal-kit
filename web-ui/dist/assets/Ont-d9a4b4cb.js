import{c as z}from"./card_bg-c410ff89.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{d as P,r as l,y as O,E as F,z as N,o as c,g as h,e as i,f as o,w as a,n as T,t as u,s as x,b as n,h as d,F as M,q as B,c as E}from"./index-64e3746b.js";import{S as A}from"./SettingOutlined-c654f283.js";const V=P({data(){const t=l({name:""}),e=l({}),_=l({}),f=l({x:0,y:0});return{formState:t,card_bg_url:z,result:e,hoveredItem:_,mousePosition:f}},computed:{tableData:function(){return this.result.data},tooltipStyle:function(){return this.mousePosition?{position:"fixed",top:this.mousePosition.y+10+"px",left:this.mousePosition.x+10+"px",zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",maxWidth:"300px",wordBreak:"break-all",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"}:{}}},methods:{handleFinish(t){this.query()},resetForm(){this.formState.name="",this.query()},addOnt(){sessionStorage.setItem("ontId",""),this.$router.push({name:"ontology_detail",query:{isAdd:!0}})},query(){this.$http.request({url:"/personkit/graph/ont/page",data:{num:this.result.num||1,query:{name:this.formState.name},size:10}}).then(t=>{this.result=l(t)}).catch(t=>console.log(t))},onAddOk(){this.query()},onPaginationChange(t,e){this.pagination.current=t,this.query()},doEdit(t){const e=t.id;sessionStorage.setItem("ontId",e),this.$router.push({name:"ontology_detail",query:{isAdd:!1,id:e}})},showDescription(t,e){this.hoveredItem=t,this.updateMousePosition(e)},hideDescription(){this.hoveredItem=null,this.mousePosition={x:0,y:0}},updateMousePosition(t){t&&(this.mousePosition={x:t.clientX,y:t.clientY})},formatTime(t){return t?t.replace("T"," ").substring(0,16):""},getInitials(t){return t?t.charAt(0).toUpperCase():"O"},doDelete(t){this.$http.request({url:"/personkit/graph/ont/delete",data:{id:t.id}}).then(e=>{O.success("操作成功"),this.query()}).catch(e=>console.log(e))}},mounted(){console.log("-------------- ont"),this.query()},components:{EditOutlined:F,SettingOutlined:A,DeleteOutlined:N},setup(){}}),U={class:"ont-container"},L={class:"search-header"},R={class:"content-area-compact"},W={class:"card-cover-compact"},X=["src"],Y={class:"card-actions-overlay"},j=["title"],G={class:"card-description-compact"},H=["title"],J={class:"card-avatar-compact"},K={class:"avatar-text-compact"},Q={class:"pagination-container-compact"};function Z(t,e,_,f,tt,et){const g=n("a-input"),m=n("a-form-item"),r=n("a-button"),y=n("a-form"),v=n("edit-outlined"),b=n("delete-outlined"),C=n("a-popconfirm"),k=n("a-avatar"),S=n("a-card-meta"),I=n("a-card"),q=n("a-col"),w=n("a-row"),$=n("a-pagination");return c(),h("div",U,[i("div",L,[o(y,{layout:"inline",name:"basic",autocomplete:"off",model:t.formState,onFinish:t.handleFinish,class:"search-form"},{default:a(()=>[o(m,{label:"名称",name:"name"},{default:a(()=>[o(g,{value:t.formState.name,"onUpdate:value":e[0]||(e[0]=s=>t.formState.name=s),placeholder:"请输入本体名称",allowClear:"",class:"search-input"},null,8,["value"])]),_:1}),o(m,null,{default:a(()=>[o(r,{type:"primary","html-type":"submit",class:"search-btn"},{default:a(()=>[...e[2]||(e[2]=[d(" 搜索 ",-1)])]),_:1})]),_:1}),o(m,null,{default:a(()=>[o(r,{onClick:t.resetForm,class:"reset-btn"},{default:a(()=>[...e[3]||(e[3]=[d(" 重置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","onFinish"]),o(r,{type:"primary",onClick:t.addOnt,class:"add-btn-float"},{default:a(()=>[...e[4]||(e[4]=[d(" 添加本体 ",-1)])]),_:1},8,["onClick"])]),i("div",R,[o(w,{gutter:[12,12],class:"ont-grid-compact"},{default:a(()=>[(c(!0),h(M,null,B(t.tableData,s=>(c(),E(q,{xs:24,sm:12,md:8,lg:6,xl:4,key:s.id},{default:a(()=>[o(I,{hoverable:"",class:"ont-card-compact",onMouseenter:p=>t.showDescription(s,p),onMouseleave:t.hideDescription},{cover:a(()=>[i("div",W,[i("img",{alt:"本体封面",src:t.card_bg_url,class:"cover-image-compact"},null,8,X),i("div",Y,[o(r,{type:"primary",size:"small",onClick:p=>t.doEdit(s),class:"overlay-btn"},{default:a(()=>[o(v),e[5]||(e[5]=d(" 编辑 ",-1))]),_:1},8,["onClick"]),o(C,{title:"确定要删除这个本体吗？",onConfirm:p=>t.doDelete(s),okText:"确定",cancelText:"取消"},{default:a(()=>[o(r,{type:"primary",danger:"",size:"small",class:"overlay-btn"},{default:a(()=>[o(b),e[6]||(e[6]=d(" 删除 ",-1))]),_:1})]),_:1},8,["onConfirm"])])])]),default:a(()=>[o(S,{class:"card-meta-compact"},{title:a(()=>[i("div",{class:"card-title-compact",title:s.ontologyName},u(s.ontologyName),9,j)]),description:a(()=>[i("div",G,[i("div",{class:"create-time-compact",title:s.description},u(t.formatTime(s.createTime)),9,H)])]),avatar:a(()=>[i("div",J,[o(k,{size:24,class:"avatar-icon-compact"},{default:a(()=>[i("span",K,u(t.getInitials(s.ontologyName)),1)]),_:2},1024)])]),_:2},1024)]),_:2},1032,["onMouseenter","onMouseleave"])]),_:2},1024))),128))]),_:1})]),i("div",Q,[o($,{current:t.result.num,"onUpdate:current":e[1]||(e[1]=s=>t.result.num=s),total:t.result.total,"show-total":s=>`共 ${s} 条数据`,onChange:t.onPaginationChange,size:"small",class:"pagination-compact"},null,8,["current","total","show-total","onChange"])]),t.hoveredItem&&t.hoveredItem.description?(c(),h("div",{key:0,class:"description-tooltip",style:T(t.tooltipStyle)},u(t.hoveredItem.description),5)):x("",!0)])}const it=D(V,[["render",Z],["__scopeId","data-v-d8a619ee"]]);export{it as default};
