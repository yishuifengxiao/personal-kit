import{f as e,A as Q,d as at,P as ot,E as st,p as rt,R as lt,q as it,C as ut,s as dt,v as ct,r as M,a as S,o as v,g as q,e as d,w as a,k as _,M as pt,b as s,h as i,F as mt,j as ft,c as O,n as U,x as _t,t as w,l as R,L as gt,y as vt,z as yt,B as bt}from"./index-507fc7e9.js";import{_ as Ct}from"./_plugin-vue_export-helper-c27b6911.js";import{P as St,a as V}from"./PlayCircleOutlined-1bd4237e.js";import{D as Ot}from"./DatabaseOutlined-e64252e7.js";import{S as wt}from"./SettingOutlined-87c37ba4.js";var ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};const kt=ht;function G(n){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},c=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(r).filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable}))),c.forEach(function(p){$t(n,p,r[p])})}return n}function $t(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}var z=function(t,r){var c=G({},t,r.attrs);return e(Q,G({},c,{icon:kt}),null)};z.displayName="HistoryOutlined";z.inheritAttrs=!1;const Dt=z;var Pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};const Tt=Pt;function J(n){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},c=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(r).filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable}))),c.forEach(function(p){Mt(n,p,r[p])})}return n}function Mt(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}var x=function(t,r){var c=J({},t,r.attrs);return e(Q,J({},c,{icon:Tt}),null)};x.displayName="StopOutlined";x.inheritAttrs=!1;const A=x;const Rt=at({name:"AllSpider",components:{PlusOutlined:ot,SettingOutlined:wt,EditOutlined:st,DeleteOutlined:rt,PlayCircleOutlined:St,PauseCircleOutlined:V,StopOutlined:A,ReloadOutlined:lt,HistoryOutlined:Dt,FileTextOutlined:it,DatabaseOutlined:Ot,ClockCircleOutlined:ut,DownloadOutlined:dt},setup(){const n=ct(),t=M({name:"",status:""}),r=M({current:1,total:100,pageSize:12}),c=S(null),p=S({}),h=S([{id:1,name:"新闻网站爬虫",description:"抓取各大新闻网站的最新资讯",status:"running",lastRunTime:"2024-01-15 14:30:00",dataCount:1250},{id:2,name:"电商商品爬虫",description:"抓取电商平台商品信息和价格",status:"stopped",lastRunTime:"2024-01-14 16:45:00",dataCount:3420},{id:3,name:"社交媒体爬虫",description:"抓取社交媒体平台的公开数据",status:"paused",lastRunTime:"2024-01-15 12:20:00",dataCount:890},{id:4,name:"股票数据爬虫",description:"实时抓取股票行情数据",status:"error",lastRunTime:"2024-01-15 10:15:00",dataCount:560},{id:5,name:"招聘网站爬虫",description:"抓取招聘信息和企业数据",status:"completed",lastRunTime:"2024-01-13 09:30:00",dataCount:2100},{id:6,name:"天气数据爬虫",description:"抓取全国各地天气信息",status:"failed",lastRunTime:"2024-01-12 18:00:00",dataCount:0}]),P=S([{time:"2024-01-15 14:30:00",operator:"admin",action:"启动爬虫",result:"成功"},{time:"2024-01-15 14:25:00",operator:"admin",action:"暂停爬虫",result:"成功"},{time:"2024-01-15 14:20:00",operator:"user1",action:"编辑爬虫配置",result:"成功"}]),y=S([{id:"data_001",crawlTime:"2024-01-15 14:30:00",sourceUrl:"https://example.com/news/123",status:"success",content:{title:"新闻标题",content:"新闻内容..."}},{id:"data_002",crawlTime:"2024-01-15 14:29:00",sourceUrl:"https://example.com/news/124",status:"failed",content:{error:"网络超时"}}]),f=M({current:1,total:50,pageSize:10});return{router:n,searchForm:t,pagination:r,spiderData:h,operationRecords:P,spiderDataList:y,dataPagination:f,currentDataDetail:p,getStatusColor:u=>({running:"#52c41a",stopped:"#8c8c8c",paused:"#faad14",error:"#ff4d4f",completed:"#1890ff",failed:"#ff4d4f"})[u]||"#8c8c8c",getStatusIcon:u=>({running:gt,stopped:A,paused:V,error:vt,completed:yt,failed:bt})[u]||A,getStatusText:u=>({running:"运行中",stopped:"停止",paused:"暂停",error:"异常",completed:"完成",failed:"失败"})[u]||u,getDataStatusColor:u=>({success:"success",failed:"error",pending:"warning"})[u]||"default",getDataStatusText:u=>({success:"成功",failed:"失败",pending:"处理中"})[u]||u,formatTime:u=>{if(!u)return"-";const o=new Date(u),g=new Date-o,k=Math.floor(g/(1e3*60*60*24)),$=Math.floor(g/(1e3*60*60)),D=Math.floor(g/(1e3*60));return k>0?`${k}天前`:$>0?`${$}小时前`:D>0?`${D}分钟前`:"刚刚"},handleSearch:()=>{r.current=1,_.success("搜索完成")},handleReset:()=>{t.name="",t.status="",r.current=1,_.success("搜索条件已重置")},handleSpiderAction:(u,o)=>{switch(c.value=o,u){case"pause":o.status="paused",_.success(`爬虫 ${o.name} 已暂停`);break;case"resume":o.status="running",_.success(`爬虫 ${o.name} 已继续运行`);break;case"stop":o.status="stopped",_.success(`爬虫 ${o.name} 已停止`);break;case"restart":o.status="running",_.success(`爬虫 ${o.name} 已重启`);break;case"records":n.push({path:"/view/spider_records",query:{spiderId:o.id,spiderName:o.name}});break;case"crawlRecords":n.push({path:`/view/crawl_records/${o.id}`,query:{spiderName:o.name}});break;case"logs":_.info("运行日志功能开发中");break;case"data":n.push({path:`/view/crawl_data/${o.id}`,query:{spiderName:o.name}});break;case"edit":n.push({path:"/view/edit_spider",query:{id:o.id}});break;case"delete":pt.confirm({title:"确认删除",content:`确定要删除爬虫 ${o.name} 吗？`,onOk(){const b=h.value.findIndex(g=>g.id===o.id);b>-1&&(h.value.splice(b,1),_.success("爬虫已删除"))}});break}},handleAddSpider:()=>{n.push("/view/add_spider")},onPaginationChange:u=>{r.current=u}}}}),At={class:"spider-container"},zt={class:"search-header"},xt={class:"content-area-compact"},jt={class:"card-cover-compact"},Ft={class:"spider-icon-container"},Nt={class:"card-actions-overlay"},Ht=["title"],Bt={class:"card-description-compact"},It={class:"spider-desc"},Lt={class:"spider-stats"},Et={class:"stat-item"},qt={class:"stat-item"},Ut={class:"pagination-container-compact"};function Vt(n,t,r,c,p,h){const P=s("a-input"),y=s("a-form-item"),f=s("a-select-option"),j=s("a-select"),C=s("a-button"),F=s("a-form"),N=s("plus-outlined"),H=s("a-avatar"),B=s("pause-circle-outlined"),m=s("a-menu-item"),I=s("play-circle-outlined"),L=s("stop-outlined"),E=s("reload-outlined"),T=s("a-menu-divider"),u=s("history-outlined"),o=s("file-text-outlined"),b=s("database-outlined"),g=s("edit-outlined"),k=s("delete-outlined"),$=s("a-menu"),D=s("setting-outlined"),W=s("a-dropdown"),X=s("clock-circle-outlined"),Y=s("a-card-meta"),Z=s("a-card"),K=s("a-col"),tt=s("a-row"),et=s("a-pagination");return v(),q("div",At,[d("div",zt,[e(F,{layout:"inline",model:n.searchForm,class:"search-form"},{default:a(()=>[e(y,{label:"名称",name:"name"},{default:a(()=>[e(P,{value:n.searchForm.name,"onUpdate:value":t[0]||(t[0]=l=>n.searchForm.name=l),placeholder:"请输入爬虫名称",allowClear:"",class:"search-input"},null,8,["value"])]),_:1}),e(y,{label:"状态",name:"status"},{default:a(()=>[e(j,{value:n.searchForm.status,"onUpdate:value":t[1]||(t[1]=l=>n.searchForm.status=l),placeholder:"请选择状态",allowClear:"",class:"search-select",style:{width:"120px"}},{default:a(()=>[e(f,{value:""},{default:a(()=>[...t[4]||(t[4]=[i("全部",-1)])]),_:1}),e(f,{value:"running"},{default:a(()=>[...t[5]||(t[5]=[i("运行中",-1)])]),_:1}),e(f,{value:"stopped"},{default:a(()=>[...t[6]||(t[6]=[i("停止",-1)])]),_:1}),e(f,{value:"paused"},{default:a(()=>[...t[7]||(t[7]=[i("暂停",-1)])]),_:1}),e(f,{value:"error"},{default:a(()=>[...t[8]||(t[8]=[i("异常",-1)])]),_:1}),e(f,{value:"completed"},{default:a(()=>[...t[9]||(t[9]=[i("完成",-1)])]),_:1}),e(f,{value:"failed"},{default:a(()=>[...t[10]||(t[10]=[i("失败",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(y,null,{default:a(()=>[e(C,{type:"primary",onClick:n.handleSearch,class:"search-btn"},{default:a(()=>[...t[11]||(t[11]=[i("确认",-1)])]),_:1},8,["onClick"])]),_:1}),e(y,null,{default:a(()=>[e(C,{onClick:n.handleReset,class:"reset-btn"},{default:a(()=>[...t[12]||(t[12]=[i("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(C,{type:"primary",onClick:t[2]||(t[2]=l=>n.showAddSpiderModal=!0),class:"add-btn-float"},{default:a(()=>[e(N),t[13]||(t[13]=i(" 添加爬虫 ",-1))]),_:1})]),d("div",xt,[e(tt,{gutter:[16,16],class:"spider-grid-compact"},{default:a(()=>[(v(!0),q(mt,null,ft(n.spiderData,l=>(v(),O(K,{xs:24,sm:12,md:8,lg:6,xl:4,key:l.id},{default:a(()=>[e(Z,{hoverable:"",class:"spider-card-compact"},{cover:a(()=>[d("div",jt,[d("div",Ft,[e(H,{size:48,class:"spider-avatar",style:U({backgroundColor:n.getStatusColor(l.status)})},{default:a(()=>[(v(),O(_t(n.getStatusIcon(l.status))))]),_:2},1032,["style"])]),d("div",{class:"status-badge",style:U({backgroundColor:n.getStatusColor(l.status)})},w(n.getStatusText(l.status)),5),d("div",Nt,[e(W,{trigger:["click"],placement:"bottomRight"},{overlay:a(()=>[e($,{onClick:({key:nt})=>n.handleSpiderAction(nt,l)},{default:a(()=>[l.status==="running"?(v(),O(m,{key:"pause"},{default:a(()=>[e(B),t[14]||(t[14]=i(" 暂停 ",-1))]),_:1})):R("",!0),l.status==="paused"?(v(),O(m,{key:"resume"},{default:a(()=>[e(I),t[15]||(t[15]=i(" 继续 ",-1))]),_:1})):R("",!0),["running","paused"].includes(l.status)?(v(),O(m,{key:"stop"},{default:a(()=>[e(L),t[16]||(t[16]=i(" 停止 ",-1))]),_:1})):R("",!0),e(m,{key:"restart"},{default:a(()=>[e(E),t[17]||(t[17]=i(" 重启 ",-1))]),_:1}),e(T),e(m,{key:"records"},{default:a(()=>[e(u),t[18]||(t[18]=i(" 操作记录 ",-1))]),_:1}),e(m,{key:"crawlRecords"},{default:a(()=>[e(o),t[19]||(t[19]=i(" 抓取记录 ",-1))]),_:1}),e(m,{key:"logs"},{default:a(()=>[e(o),t[20]||(t[20]=i(" 运行日志 ",-1))]),_:1}),e(m,{key:"data"},{default:a(()=>[e(b),t[21]||(t[21]=i(" 抓取数据 ",-1))]),_:1}),e(T),e(m,{key:"edit"},{default:a(()=>[e(g),t[22]||(t[22]=i(" 编辑 ",-1))]),_:1}),e(m,{key:"delete"},{default:a(()=>[e(k),t[23]||(t[23]=i(" 删除 ",-1))]),_:1})]),_:2},1032,["onClick"])]),default:a(()=>[e(C,{type:"primary",size:"small",class:"action-menu-btn"},{default:a(()=>[e(D),t[24]||(t[24]=i(" 操作 ",-1))]),_:1})]),_:2},1024)])])]),default:a(()=>[e(Y,null,{title:a(()=>[d("div",{class:"card-title-compact",title:l.name},w(l.name),9,Ht)]),description:a(()=>[d("div",Bt,[d("div",It,w(l.description),1),d("div",Lt,[d("div",Et,[e(X),d("span",null,w(n.formatTime(l.lastRunTime)),1)]),d("div",qt,[e(b),d("span",null,w(l.dataCount)+" 条",1)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),d("div",Ut,[e(et,{current:n.pagination.current,"onUpdate:current":t[3]||(t[3]=l=>n.pagination.current=l),total:n.pagination.total,"show-total":l=>`共 ${l} 个爬虫`,onChange:n.onPaginationChange,size:"small",class:"pagination-compact"},null,8,["current","total","show-total","onChange"])])])}const Yt=Ct(Rt,[["render",Vt],["__scopeId","data-v-d0005b9a"]]);export{Yt as default};
