import{c as q}from"./card_bg-c410ff89.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{d as S,r as i,E as D,z as F,o as l,g as m,f as n,w as r,e as d,b as o,h as p,F as E,q as B,c as O}from"./index-64e3746b.js";import{S as z}from"./SettingOutlined-c654f283.js";const A=S({data(){const e=i({name:""}),t=i({});return{formState:e,card_bg_url:q,result:t}},computed:{tableData:function(){return this.result.data}},methods:{handleFinish(e){this.query()},addAction(){this.$router.push({name:"graph_config",query:{}})},query(){this.$http.request({url:"/personkit/graph/define/page",data:{num:1,query:{name:this.formState.name},size:10}}).then(e=>{this.result=i(e)}).catch(e=>console.log(e))},onAddOk(){this.query()},onPaginationChange(e,t){this.pagination.current=e,this.query()},doEdit(e){this.$refs.ConfigurePopup.showDrawer(e)},doDelete(e){this.$http.request({url:"/personkit/data/dataSet/delete",data:{id:e.id}}).then(t=>{this.$msg.success("删除成功"),this.query()}).catch(t=>console.log(t))}},mounted(){this.query()},components:{EditOutlined:D,SettingOutlined:z,DeleteOutlined:F},setup(){}}),N={style:{"max-height":"65vh","min-height":"55vh","overflow-y":"auto"}},P=["src"],V={style:{"margin-top":"15px",float:"right"}};function T(e,t,U,G,L,j){const c=o("a-input"),s=o("a-form-item"),u=o("a-button"),h=o("a-form"),_=o("a-divider"),f=o("setting-outlined"),g=o("delete-outlined"),v=o("a-avatar"),y=o("a-card-meta"),k=o("a-card"),C=o("a-flex"),$=o("a-pagination");return l(),m("div",null,[n(h,{layout:"inline",name:"basic",autocomplete:"off",model:e.formState,onFinish:e.handleFinish},{default:r(()=>[n(s,{label:"名称",name:"name"},{default:r(()=>[n(c,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=a=>e.formState.name=a),placeholder:"名称",allowClear:""},null,8,["value"])]),_:1}),n(s,null,{default:r(()=>[n(u,{type:"primary","html-type":"submit"},{default:r(()=>[...t[2]||(t[2]=[p(" 搜索 ",-1)])]),_:1})]),_:1}),n(s,null,{default:r(()=>[n(u,{type:"primary",onClick:e.addAction},{default:r(()=>[...t[3]||(t[3]=[p(" 添加图谱 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","onFinish"]),n(_,{dashed:""}),d("div",N,[n(C,{wrap:"wrap",gap:"small"},{default:r(()=>[(l(!0),m(E,null,B(e.tableData,a=>(l(),O(k,{hoverable:"",style:{width:"300px"},key:a},{cover:r(()=>[d("img",{alt:"example",src:e.card_bg_url},null,8,P)]),actions:r(()=>[n(f,{key:"setting",onClick:b=>e.doEdit(a)},null,8,["onClick"]),n(g,{key:"ellipsis",onClick:b=>e.doDelete(a)},null,8,["onClick"])]),default:r(()=>[n(y,{title:a.name,description:a.description+a.createTime},{avatar:r(()=>[n(v,{src:""})]),_:1},8,["title","description"])]),_:2},1024))),128))]),_:1})]),d("div",V,[n($,{current:e.result.num,"onUpdate:current":t[1]||(t[1]=a=>e.result.num=a),total:e.result.total,"show-total":a=>`共 ${a} 条数据`,onChange:e.onPaginationChange},null,8,["current","total","show-total","onChange"])])])}const M=w(A,[["render",T]]);export{M as default};
