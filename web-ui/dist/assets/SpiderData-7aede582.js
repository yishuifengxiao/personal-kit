import{d as G,P as X,E as Y,p as Z,N as x,S as ee,R as te,v as ae,r as A,a as h,I as W,K as le,o as m,g as F,e as r,f as a,w as l,O as ne,k as S,M as oe,b as i,h as d,c as D,t as v,l as N}from"./index-c56651a2.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";const de=G({name:"SpiderData",components:{PlusOutlined:X,EditOutlined:Y,DeleteOutlined:Z,EyeOutlined:x,SearchOutlined:ee,ReloadOutlined:te},setup(){ae();const e=A({name:"",status:""}),t=h([]),H=[{title:"数据ID",dataIndex:"id",key:"id",width:120},{title:"数据名称",dataIndex:"name",key:"name",width:200},{title:"数据类型",dataIndex:"dataType",key:"dataType",width:100,filters:[{text:"文本",value:"text"},{text:"JSON",value:"json"},{text:"富文本",value:"richtext"},{text:"文件",value:"file"}]},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:160,sorter:!0},{title:"数据来源",dataIndex:"source",key:"source",width:150},{title:"状态",dataIndex:"status",key:"status",width:100,filters:[{text:"启用",value:"active"},{text:"停用",value:"inactive"}]},{title:"操作",key:"action",width:150,fixed:"right"}],y=h([]),O=h(!1),f=A({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`共 ${n} 条数据`}),T=h(!1),p=h(!1),w=h(""),U=h({}),g=h(),s=A({id:"",name:"",source:"",dataType:"text",status:"active",description:"",content:"",fileName:"",fileUrl:""}),z={name:[{required:!0,message:"请输入数据名称",trigger:"blur"}],source:[{required:!0,message:"请输入数据来源",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},V=W(()=>({selectedRowKeys:t.value,onChange:n=>{t.value=n}})),M=n=>({active:"green",inactive:"red"})[n]||"default",j=n=>({text:"blue",json:"orange",richtext:"purple",file:"cyan"})[n]||"default",E=n=>({active:"启用",inactive:"停用"})[n]||n,B=n=>({text:"文本",json:"JSON",richtext:"富文本",file:"文件"})[n]||"未知",L=()=>{ne(()=>{s.content="",s.fileName="",s.fileUrl=""})},K=n=>{if(!n)return"";try{const u=JSON.parse(n);return JSON.stringify(u,null,2)}catch{return n}},C=()=>{f.current=1,$(),S.success("搜索完成")},_=()=>{e.name="",e.status="",f.current=1,$(),S.success("搜索条件已重置")},R=(n,u,c)=>{f.current=n.current,f.pageSize=n.pageSize,$()},I=()=>{w.value="添加数据",Object.assign(s,{id:"",name:"",source:"",dataType:"text",status:"active",description:"",content:"",fileName:"",fileUrl:""}),T.value=!0},k=n=>{w.value="编辑数据",Object.assign(s,{id:n.id,name:n.name,source:n.source,dataType:n.dataType||"text",status:n.status,description:n.description||"",content:n.content||"",fileName:n.fileName||"",fileUrl:n.fileUrl||""}),T.value=!0},P=n=>{U.value=n,p.value=!0},q=n=>{const u=y.value.findIndex(c=>c.id===n.id);u>-1&&(y.value.splice(u,1),f.total--,S.success("删除成功"))},o=()=>{oe.confirm({title:"确认批量删除",content:`确定要删除选中的 ${t.value.length} 条数据吗？`,onOk(){y.value=y.value.filter(n=>!t.value.includes(n.id)),f.total=y.value.length,t.value=[],S.success("批量删除成功")}})},b=()=>{g.value.validate().then(()=>{if(s.id){const n=y.value.findIndex(u=>u.id===s.id);n!==-1&&(y.value[n]={...y.value[n],name:s.name,source:s.source,dataType:s.dataType,status:s.status,description:s.description,content:s.content,fileName:s.fileName,fileUrl:s.fileUrl}),S.success("编辑成功")}else{const n={id:`data_${Date.now()}`,name:s.name,source:s.source,dataType:s.dataType,status:s.status,description:s.description,content:s.content,fileName:s.fileName,fileUrl:s.fileUrl,createTime:new Date().toLocaleString()};y.value.unshift(n),f.total++,S.success("添加成功")}T.value=!1,g.value.resetFields()}).catch(n=>{console.log("表单验证失败:",n)})},J=()=>{T.value=!1,g.value.resetFields()},Q=()=>{p.value=!1,U.value={}},$=async()=>{O.value=!0;try{await new Promise(c=>setTimeout(c,500));const n=[];for(let c=1;c<=50;c++)n.push({id:`data_${c.toString().padStart(3,"0")}`,name:`数据项 ${c}`,createTime:new Date(Date.now()-Math.random()*864e5*30).toLocaleString("zh-CN"),source:["爬虫A","爬虫B","爬虫C","手动导入"][Math.floor(Math.random()*4)],status:Math.random()>.3?"active":"inactive"});let u=n;e.name&&(u=u.filter(c=>c.name.includes(e.name))),e.status&&(u=u.filter(c=>c.status===e.status)),y.value=u,f.total=u.length}catch{S.error("加载数据失败")}finally{O.value=!1}};return le(()=>{$()}),{searchForm:e,selectedRowKeys:t,columns:H,dataList:y,loading:O,paginationConfig:W(()=>({...f,current:f.current,pageSize:f.pageSize,total:f.total})),rowSelection:V,getStatusColor:M,getDataTypeColor:j,getStatusText:E,getDataTypeText:B,formatJsonContent:K,handleSearch:C,handleReset:_,handleTableChange:R,handleAddData:I,handleEdit:k,handleDetail:P,handleDelete:q,handleBatchDelete:o,handleDataTypeChange:L,modalVisible:T,detailModalVisible:p,modalTitle:w,currentRecord:U,dataFormRef:g,dataForm:s,dataFormRules:z,handleModalOk:b,handleModalCancel:J,handleDetailModalCancel:Q}}}),re={class:"spider-data-container"},ie={class:"search-header"},ue={class:"header-actions"},pe={class:"table-container"},me={style:{"margin-top":"8px"}},fe={style:{"margin-top":"16px"}},ce={key:0,class:"data-content-area"},ve={class:"text-content"},ye={key:1,class:"data-content-area"},ge={class:"json-content"},Te={key:2,class:"data-content-area"},ke=["innerHTML"],be={key:3,class:"data-content-area"},Ce={class:"file-info"},he={style:{"margin-top":"8px"}},Fe=["href"],we={key:1},Se={key:4,class:"data-content-area"};function De(e,t,H,y,O,f){const T=i("a-input"),p=i("a-form-item"),w=i("a-select-option"),U=i("a-select"),g=i("a-button"),s=i("a-form"),z=i("delete-outlined"),V=i("plus-outlined"),M=i("a-tag"),j=i("edit-outlined"),E=i("eye-outlined"),B=i("a-popconfirm"),L=i("a-space"),K=i("a-table"),C=i("a-radio"),_=i("a-radio-group"),R=i("a-textarea"),I=i("a-modal"),k=i("a-descriptions-item"),P=i("a-descriptions"),q=i("a-divider");return m(),F("div",re,[r("div",ie,[a(s,{layout:"inline",model:e.searchForm,class:"search-form"},{default:l(()=>[a(p,{label:"名称",name:"name"},{default:l(()=>[a(T,{value:e.searchForm.name,"onUpdate:value":t[0]||(t[0]=o=>e.searchForm.name=o),placeholder:"请输入数据名称",allowClear:"",class:"search-input"},null,8,["value"])]),_:1}),a(p,{label:"状态",name:"status"},{default:l(()=>[a(U,{value:e.searchForm.status,"onUpdate:value":t[1]||(t[1]=o=>e.searchForm.status=o),placeholder:"请选择状态",allowClear:"",class:"search-select",style:{width:"120px"}},{default:l(()=>[a(w,{value:""},{default:l(()=>[...t[14]||(t[14]=[d("全部",-1)])]),_:1}),a(w,{value:"active"},{default:l(()=>[...t[15]||(t[15]=[d("启用",-1)])]),_:1}),a(w,{value:"inactive"},{default:l(()=>[...t[16]||(t[16]=[d("停用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),a(p,null,{default:l(()=>[a(g,{type:"primary",onClick:e.handleSearch,class:"search-btn"},{default:l(()=>[...t[17]||(t[17]=[d("确认",-1)])]),_:1},8,["onClick"])]),_:1}),a(p,null,{default:l(()=>[a(g,{onClick:e.handleReset,class:"reset-btn"},{default:l(()=>[...t[18]||(t[18]=[d("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),r("div",ue,[a(g,{danger:"",onClick:e.handleBatchDelete,disabled:e.selectedRowKeys.length===0},{default:l(()=>[a(z),t[19]||(t[19]=d(" 批量删除 ",-1))]),_:1},8,["onClick","disabled"]),a(g,{type:"primary",onClick:e.handleAddData,class:"add-btn-float"},{default:l(()=>[a(V),t[20]||(t[20]=d(" 添加数据 ",-1))]),_:1},8,["onClick"])])]),r("div",pe,[a(K,{columns:e.columns,"data-source":e.dataList,pagination:e.paginationConfig,loading:e.loading,"row-selection":e.rowSelection,rowKey:"id",size:"middle",onChange:e.handleTableChange},{bodyCell:l(({column:o,record:b})=>[o.key==="status"?(m(),D(M,{key:0,color:e.getStatusColor(b.status)},{default:l(()=>[d(v(e.getStatusText(b.status)),1)]),_:2},1032,["color"])):o.key==="dataType"?(m(),D(M,{key:1,color:e.getDataTypeColor(b.dataType)},{default:l(()=>[d(v(e.getDataTypeText(b.dataType)),1)]),_:2},1032,["color"])):o.key==="action"?(m(),D(L,{key:2},{default:l(()=>[a(g,{type:"link",size:"small",onClick:J=>e.handleEdit(b)},{default:l(()=>[a(j),t[21]||(t[21]=d(" 编辑 ",-1))]),_:1},8,["onClick"]),a(g,{type:"link",size:"small",onClick:J=>e.handleDetail(b)},{default:l(()=>[a(E),t[22]||(t[22]=d(" 详情 ",-1))]),_:1},8,["onClick"]),a(B,{title:"确定要删除这条数据吗？",onConfirm:J=>e.handleDelete(b),okText:"确定",cancelText:"取消"},{default:l(()=>[a(g,{type:"link",danger:"",size:"small"},{default:l(()=>[a(z),t[23]||(t[23]=d(" 删除 ",-1))]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):N("",!0)]),_:1},8,["columns","data-source","pagination","loading","row-selection","onChange"])]),a(I,{open:e.modalVisible,"onUpdate:open":t[12]||(t[12]=o=>e.modalVisible=o),title:e.modalTitle,width:"800px",onOk:e.handleModalOk,onCancel:e.handleModalCancel},{default:l(()=>[a(s,{ref:"dataFormRef",model:e.dataForm,rules:e.dataFormRules,"label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[a(p,{label:"数据名称",name:"name"},{default:l(()=>[a(T,{value:e.dataForm.name,"onUpdate:value":t[2]||(t[2]=o=>e.dataForm.name=o),placeholder:"请输入数据名称"},null,8,["value"])]),_:1}),a(p,{label:"数据来源",name:"source"},{default:l(()=>[a(T,{value:e.dataForm.source,"onUpdate:value":t[3]||(t[3]=o=>e.dataForm.source=o),placeholder:"请输入数据来源"},null,8,["value"])]),_:1}),a(p,{label:"数据类型",name:"dataType"},{default:l(()=>[a(_,{value:e.dataForm.dataType,"onUpdate:value":t[4]||(t[4]=o=>e.dataForm.dataType=o),onChange:e.handleDataTypeChange,style:{display:"flex","flex-wrap":"wrap",gap:"16px"}},{default:l(()=>[a(C,{value:"text"},{default:l(()=>[...t[24]||(t[24]=[d("文本",-1)])]),_:1}),a(C,{value:"json"},{default:l(()=>[...t[25]||(t[25]=[d("JSON",-1)])]),_:1}),a(C,{value:"richtext"},{default:l(()=>[...t[26]||(t[26]=[d("富文本",-1)])]),_:1}),a(C,{value:"file"},{default:l(()=>[...t[27]||(t[27]=[d("文件",-1)])]),_:1})]),_:1},8,["value","onChange"])]),_:1}),a(p,{label:"状态",name:"status"},{default:l(()=>[a(_,{value:e.dataForm.status,"onUpdate:value":t[5]||(t[5]=o=>e.dataForm.status=o)},{default:l(()=>[a(C,{value:"active"},{default:l(()=>[...t[28]||(t[28]=[d("启用",-1)])]),_:1}),a(C,{value:"inactive"},{default:l(()=>[...t[29]||(t[29]=[d("停用",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),a(p,{label:"描述",name:"description"},{default:l(()=>[a(R,{value:e.dataForm.description,"onUpdate:value":t[6]||(t[6]=o=>e.dataForm.description=o),placeholder:"请输入数据描述",rows:2},null,8,["value"])]),_:1}),e.dataForm.dataType==="text"?(m(),D(p,{key:0,label:"数据内容",name:"content"},{default:l(()=>[a(R,{value:e.dataForm.content,"onUpdate:value":t[7]||(t[7]=o=>e.dataForm.content=o),placeholder:"请输入文本数据内容",rows:6},null,8,["value"])]),_:1})):N("",!0),e.dataForm.dataType==="json"?(m(),D(p,{key:1,label:"JSON数据",name:"content"},{default:l(()=>[a(R,{value:e.dataForm.content,"onUpdate:value":t[8]||(t[8]=o=>e.dataForm.content=o),placeholder:'请输入JSON格式数据，如：{"key": "value"}',rows:8},null,8,["value"])]),_:1})):N("",!0),e.dataForm.dataType==="richtext"?(m(),D(p,{key:2,label:"富文本内容",name:"content"},{default:l(()=>[a(R,{value:e.dataForm.content,"onUpdate:value":t[9]||(t[9]=o=>e.dataForm.content=o),placeholder:"请输入富文本内容",rows:8},null,8,["value"]),t[30]||(t[30]=r("div",{style:{color:"#999","font-size":"12px","margin-top":"4px"}},"支持HTML标签的富文本内容",-1))]),_:1})):N("",!0),e.dataForm.dataType==="file"?(m(),D(p,{key:3,label:"文件信息"},{default:l(()=>[a(T,{value:e.dataForm.fileName,"onUpdate:value":t[10]||(t[10]=o=>e.dataForm.fileName=o),placeholder:"请输入文件名称"},null,8,["value"]),r("div",me,[a(T,{value:e.dataForm.fileUrl,"onUpdate:value":t[11]||(t[11]=o=>e.dataForm.fileUrl=o),placeholder:"请输入文件链接地址"},null,8,["value"])]),t[31]||(t[31]=r("div",{style:{color:"#999","font-size":"12px","margin-top":"4px"}},"支持音视频、图片、Excel、Word、PDF等文件类型的链接",-1))]),_:1})):N("",!0)]),_:1},8,["model","rules"])]),_:1},8,["open","title","onOk","onCancel"]),a(I,{open:e.detailModalVisible,"onUpdate:open":t[13]||(t[13]=o=>e.detailModalVisible=o),title:"数据详情",width:"800px",footer:null,onCancel:e.handleDetailModalCancel},{default:l(()=>[a(P,{column:2,bordered:""},{default:l(()=>[a(k,{label:"数据ID"},{default:l(()=>[d(v(e.currentRecord.id),1)]),_:1}),a(k,{label:"数据名称"},{default:l(()=>[d(v(e.currentRecord.name),1)]),_:1}),a(k,{label:"创建时间"},{default:l(()=>[d(v(e.currentRecord.createTime),1)]),_:1}),a(k,{label:"数据来源"},{default:l(()=>[d(v(e.currentRecord.source),1)]),_:1}),a(k,{label:"数据类型"},{default:l(()=>[d(v(e.getDataTypeText(e.currentRecord.dataType)),1)]),_:1}),a(k,{label:"状态"},{default:l(()=>[a(M,{color:e.getStatusColor(e.currentRecord.status)},{default:l(()=>[d(v(e.getStatusText(e.currentRecord.status)),1)]),_:1},8,["color"])]),_:1}),a(k,{label:"描述",span:2},{default:l(()=>[d(v(e.currentRecord.description||"暂无描述"),1)]),_:1})]),_:1}),r("div",fe,[a(q,{orientation:"left"},{default:l(()=>[...t[32]||(t[32]=[d("数据内容",-1)])]),_:1}),e.currentRecord.dataType==="text"?(m(),F("div",ce,[t[33]||(t[33]=r("div",{class:"content-label"},"文本内容：",-1)),r("div",ve,v(e.currentRecord.content||"暂无文本数据"),1)])):e.currentRecord.dataType==="json"?(m(),F("div",ye,[t[34]||(t[34]=r("div",{class:"content-label"},"JSON数据：",-1)),r("pre",ge,v(e.formatJsonContent(e.currentRecord.content)||"暂无JSON数据"),1)])):e.currentRecord.dataType==="richtext"?(m(),F("div",Te,[t[35]||(t[35]=r("div",{class:"content-label"},"富文本内容：",-1)),r("div",{class:"richtext-content",innerHTML:e.currentRecord.content||"<p>暂无富文本数据</p>"},null,8,ke)])):e.currentRecord.dataType==="file"?(m(),F("div",be,[t[39]||(t[39]=r("div",{class:"content-label"},"文件信息：",-1)),r("div",Ce,[r("div",null,[t[36]||(t[36]=r("strong",null,"文件名称：",-1)),d(v(e.currentRecord.fileName||"未命名文件"),1)]),r("div",he,[t[37]||(t[37]=r("strong",null,"文件链接：",-1)),e.currentRecord.fileUrl?(m(),F("a",{key:0,href:e.currentRecord.fileUrl,target:"_blank",rel:"noopener noreferrer"},v(e.currentRecord.fileUrl),9,Fe)):(m(),F("span",we,"暂无文件链接"))]),t[38]||(t[38]=r("div",{style:{"margin-top":"8px",color:"#666","font-size":"12px"}}," 支持音视频、图片、Excel、Word、PDF等文件类型 ",-1))])])):(m(),F("div",Se,[...t[40]||(t[40]=[r("div",{class:"content-label"},"数据内容：",-1),r("div",{style:{color:"#999",padding:"16px",background:"#f5f5f5","border-radius":"4px"}}," 暂无数据内容 ",-1)])]))])]),_:1},8,["open","onCancel"])])}const Me=se(de,[["render",De],["__scopeId","data-v-e7f61f4a"]]);export{Me as default};
