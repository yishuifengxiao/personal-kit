import{f as s,A as b,R as ze,O as Se,Q as Pe,T as Ce,U as He,E as Ve,p as ke,V as je,a as f,I as ce,r as K,z as De,o as p,g as S,e as c,w as u,F as de,j as ue,n as Ie,s as fe,l as me,k as v,M as pe,W as Le,b as d,c as P,t as V,h as N,y as Ue}from"./index-34def72e.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";var Ne={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42zm-134 50c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm296 294H328.1c-6.7 0-10.4-7.7-6.3-12.9l99.8-127.2a8 8 0 0112.6 0l41.1 52.4 77.8-99.2a8.1 8.1 0 0112.7 0l136.5 174c4.1 5.2.4 12.9-6.3 12.9z",fill:n}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}},{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0z",fill:e}}]}},name:"file-image",theme:"twotone"};const Be=Ne;function ve(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){Re(o,r,n[r])})}return o}function Re(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var ee=function(e,n){var t=ve({},e,n.attrs);return s(b,ve({},t,{icon:Be}),null)};ee.displayName="FileImageTwoTone";ee.inheritAttrs=!1;const We=ee;var $e={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M509.2 490.8c-.7-1.3-1.4-1.9-2.2-2-2.9 3.3-2.2 31.5 2.7 51.4 4-13.6 4.7-40.5-.5-49.4zm-1.6 120.5c-7.7 20-18.8 47.3-32.1 71.4 4-1.6 8.1-3.3 12.3-5 17.6-7.2 37.3-15.3 58.9-20.2-14.9-11.8-28.4-27.7-39.1-46.2z",fill:n}},{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42zm55 287.6c16.1-1.9 30.6-2.8 44.3-2.3 12.8.4 23.6 2 32 5.1.2.1.3.1.5.2.4.2.8.3 1.2.5.5.2 1.1.4 1.6.7.1.1.3.1.4.2 4.1 1.8 7.5 4 10.1 6.6 9.1 9.1 11.8 26.1 6.2 39.6-3.2 7.7-11.7 20.5-33.3 20.5-21.8 0-53.9-9.7-82.1-24.8-25.5 4.3-53.7 13.9-80.9 23.1-5.8 2-11.8 4-17.6 5.9-38 65.2-66.5 79.4-84.1 79.4-4.2 0-7.8-.9-10.8-2-6.9-2.6-12.8-8-16.5-15-.9-1.7-1.6-3.4-2.2-5.2-1.6-4.8-2.1-9.6-1.3-13.6l.6-2.7c.1-.2.1-.4.2-.6.2-.7.4-1.4.7-2.1 0-.1.1-.2.1-.3 4.1-11.9 13.6-23.4 27.7-34.6 12.3-9.8 27.1-18.7 45.9-28.4 15.9-28 37.6-75.1 51.2-107.4-10.8-41.8-16.7-74.6-10.1-98.6.9-3.3 2.5-6.4 4.6-9.1.2-.2.3-.4.5-.6.1-.1.1-.2.2-.2 6.3-7.5 16.9-11.9 28.1-11.5 16.6.7 29.7 11.5 33 30.1 1.7 8 2.2 16.5 1.9 25.7v.7c0 .5 0 1-.1 1.5-.7 13.3-3 26.6-7.3 44.7-.4 1.6-.8 3.2-1.2 5.2l-1 4.1-.1.3c.1.2.1.3.2.5l1.8 4.5c.1.3.3.7.4 1 .7 1.6 1.4 3.3 2.1 4.8v.1c8.7 18.8 19.7 33.4 33.9 45.1 4.3 3.5 8.9 6.7 13.9 9.8 1.8-.5 3.5-.7 5.3-.9z",fill:n}},{tag:"path",attrs:{d:"M391.5 761c5.7-4.4 16.2-14.5 30.1-34.7-10.3 9.4-23.4 22.4-30.1 34.7zm270.9-83l.2-.3h.2c.6-.4.5-.7.4-.9-.1-.1-4.5-9.3-45.1-7.4 35.3 13.9 43.5 9.1 44.3 8.6z",fill:n}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}},{tag:"path",attrs:{d:"M535.9 585.3c-.8-1.7-1.5-3.3-2.2-4.9-.1-.3-.3-.7-.4-1l-1.8-4.5c-.1-.2-.1-.3-.2-.5l.1-.3.2-1.1c4-16.3 8.6-35.3 9.4-54.4v-.7c.3-8.6-.2-17.2-2-25.6-3.8-21.3-19.5-29.6-32.9-30.2-11.3-.5-21.8 4-28.1 11.4-.1.1-.1.2-.2.2-.2.2-.4.4-.5.6-2.1 2.7-3.7 5.8-4.6 9.1-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.4-51.2 107.4v.1c-27.7 14.3-64.1 35.8-73.6 62.9 0 .1-.1.2-.1.3-.2.7-.5 1.4-.7 2.1-.1.2-.1.4-.2.6-.2.9-.5 1.8-.6 2.7-.9 4-.4 8.8 1.3 13.6.6 1.8 1.3 3.5 2.2 5.2 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-2.6-2.6-6-4.8-10.1-6.6-.1-.1-.3-.1-.4-.2-.5-.2-1.1-.4-1.6-.7-.4-.2-.8-.3-1.2-.5-.2-.1-.3-.1-.5-.2-16.2-5.8-41.7-6.7-76.3-2.8l-5.3.6c-5-3-9.6-6.3-13.9-9.8-14.2-11.3-25.1-25.8-33.8-44.7zM391.5 761c6.7-12.3 19.8-25.3 30.1-34.7-13.9 20.2-24.4 30.3-30.1 34.7zM507 488.8c.8.1 1.5.7 2.2 2 5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4zm-19.2 188.9c-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4 10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2zm175.4-.9c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4z",fill:e}}]}},name:"file-pdf",theme:"twotone"};const qe=$e;function he(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){Ge(o,r,n[r])})}return o}function Ge(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var te=function(e,n){var t=he({},e,n.attrs);return s(b,he({},t,{icon:qe}),null)};te.displayName="FilePdfTwoTone";te.inheritAttrs=!1;const Qe=te;var Xe={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42zm-22 322c0 4.4-3.6 8-8 8H320c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h184c4.4 0 8 3.6 8 8v48zm200-184v48c0 4.4-3.6 8-8 8H320c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h384c4.4 0 8 3.6 8 8z",fill:n}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}},{tag:"path",attrs:{d:"M312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8zm192 128H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:e}}]}},name:"file-text",theme:"twotone"};const Ye=Xe;function ge(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){Je(o,r,n[r])})}return o}function Je(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var ne=function(e,n){var t=ge({},e,n.attrs);return s(b,ge({},t,{icon:Ye}),null)};ne.displayName="FileTextTwoTone";ne.inheritAttrs=!1;const Ze=ne;var Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};const et=Ke;function Oe(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){tt(o,r,n[r])})}return o}function tt(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var oe=function(e,n){var t=Oe({},e,n.attrs);return s(b,Oe({},t,{icon:et}),null)};oe.displayName="FolderAddOutlined";oe.inheritAttrs=!1;const nt=oe;var ot={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z",fill:e}},{tag:"path",attrs:{d:"M372.5 256H184v512h656V370.4H492.1z",fill:n}}]}},name:"folder",theme:"twotone"};const lt=ot;function we(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){at(o,r,n[r])})}return o}function at(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var le=function(e,n){var t=we({},e,n.attrs);return s(b,we({},t,{icon:lt}),null)};le.displayName="FolderTwoTone";le.inheritAttrs=!1;const rt=le;var it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]},name:"scissor",theme:"outlined"};const st=it;function be(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){ct(o,r,n[r])})}return o}function ct(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var ae=function(e,n){var t=be({},e,n.attrs);return s(b,be({},t,{icon:st}),null)};ae.displayName="ScissorOutlined";ae.inheritAttrs=!1;const dt=ae;var ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z"}}]},name:"snippets",theme:"outlined"};const ft=ut;function Te(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){mt(o,r,n[r])})}return o}function mt(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var re=function(e,n){var t=Te({},e,n.attrs);return s(b,Te({},t,{icon:ft}),null)};re.displayName="SnippetsOutlined";re.inheritAttrs=!1;const pt=re;var vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const ht=vt;function ye(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),t.forEach(function(r){gt(o,r,n[r])})}return o}function gt(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var ie=function(e,n){var t=ye({},e,n.attrs);return s(b,ye({},t,{icon:ht}),null)};ie.displayName="UploadOutlined";ie.inheritAttrs=!1;const Ot=ie;const wt={name:"PersonalCloud",components:{UploadOutlined:Ot,FolderAddOutlined:nt,ReloadOutlined:ze,FolderTwoTone:rt,FileTwoTone:Se,FileImageTwoTone:We,FileTextTwoTone:Ze,FilePdfTwoTone:Qe,FolderOpenOutlined:Pe,DownloadOutlined:Ce,CopyOutlined:He,ScissorOutlined:dt,SnippetsOutlined:pt,EditOutlined:Ve,DeleteOutlined:ke,InfoCircleOutlined:je},setup(){const o=f("/"),e=ce(()=>["根目录",...o.value.split("/").filter(Boolean)]),n=f([{id:1,name:"文档",type:"folder",size:0,updatedAt:"2024-01-15 10:30:00",path:"/文档"},{id:2,name:"图片",type:"folder",size:0,updatedAt:"2024-01-14 15:20:00",path:"/图片"},{id:3,name:"项目报告.pdf",type:"file",size:2048576,updatedAt:"2024-01-13 09:15:00",path:"/项目报告.pdf"},{id:4,name:"会议记录AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.txt",type:"file",size:10240,updatedAt:"2024-01-12 14:30:00",path:"/会议记录.txt"},{id:5,name:"产品截图.png",type:"file",size:524288,updatedAt:"2024-01-11 16:45:00",path:"/产品截图.png"}]),t=f(!1),r=f(""),F=f([]),T=f(!1),C=K({x:0,y:0}),_=f(null),h=f(null),A=f(""),k=f(!1),j=f(!1),M=f(!1),B=f(!1),D=f(!1),y=K({name:""}),x=K({name:""}),H=f(null),R=ce(()=>{if(!r.value)return n.value;const l=r.value.toLowerCase();return n.value.filter(i=>i.name.toLowerCase().includes(l))}),z=l=>{if(l===0)return"0 B";const i=1024,m=["B","KB","MB","GB"],Y=Math.floor(Math.log(l)/Math.log(i));return parseFloat((l/Math.pow(i,Y)).toFixed(2))+" "+m[Y]},W=l=>l,$=l=>{if(l===0)o.value="/";else{const m="/"+o.value.split("/").filter(Boolean).slice(0,l).join("/");o.value=m}O()},O=()=>{t.value=!0,setTimeout(()=>{t.value=!1,v.success("文件列表已刷新")},500)},q=()=>{v.success("文件上传成功"),k.value=!1,O()},G=()=>{if(!x.name.trim()){v.warning("请输入文件夹名称");return}const l={id:Date.now(),name:x.name,type:"folder",size:0,updatedAt:new Date().toLocaleString("zh-CN"),path:o.value+"/"+x.name};n.value.unshift(l),v.success("文件夹创建成功"),j.value=!1,x.name=""},Q=()=>{if(!y.name.trim()){v.warning("请输入新名称");return}H.value&&(H.value.name=y.name,v.success("重命名成功"),M.value=!1,y.name="")},I=l=>{pe.confirm({title:"确认删除",content:`确定要删除 "${l.name}" 吗？`,onOk(){const i=n.value.findIndex(m=>m.id===l.id);i>-1&&(n.value.splice(i,1),v.success("删除成功"))}})},w=l=>{v.success(`开始下载 ${l.name}`);const i=document.createElement("a");i.href="#",i.download=l.name,i.click()},L=l=>[".jpg",".jpeg",".png",".gif",".bmp",".svg"].some(m=>l.toLowerCase().endsWith(m)),U=l=>[".txt",".md",".json",".xml",".csv",".log"].some(m=>l.toLowerCase().endsWith(m)),E=l=>l.toLowerCase().endsWith(".pdf"),a=(l,i)=>{i.preventDefault(),_.value=l,T.value=!0,Le(()=>{let J=i.clientX,Z=i.clientY;J+180>window.innerWidth&&(J=window.innerWidth-180-10),Z+250>window.innerHeight&&(Z=window.innerHeight-250-10),C.x=J,C.y=Z})},g=l=>{X(l)},X=l=>{const i=_.value;if(i){switch(l){case"open":i.type==="folder"?(o.value=i.path,O()):w(i);break;case"download":w(i);break;case"copy":h.value=i,A.value="copy",v.success("已复制到剪贴板");break;case"cut":h.value=i,A.value="cut",v.success("已剪切到剪贴板");break;case"paste":h.value&&i.type==="folder"&&(v.success("粘贴成功"),h.value=null,A.value="");break;case"rename":H.value=i,y.name=i.name,M.value=!0;break;case"delete":I(i);break;case"properties":se(i);break}T.value=!1}},xe=(l,i)=>{if(i.ctrlKey||i.metaKey){const m=F.value.indexOf(l.id);m>-1?F.value.splice(m,1):F.value.push(l.id)}else F.value=[l.id]},Fe=l=>{l.type==="folder"?(o.value=l.path,O()):w(l)},_e=()=>{},se=l=>{const i=document.createElement("div");i.style.marginTop="16px",i.innerHTML=`
        <p><strong>名称：</strong>${l.name}</p>
        <p><strong>类型：</strong>${l.type==="folder"?"文件夹":"文件"}</p>
        ${l.type!=="folder"?`<p><strong>大小：</strong>${z(l.size)}</p>`:""}
        <p><strong>修改时间：</strong>${l.updatedAt}</p>
        <p><strong>路径：</strong>${l.path}</p>
      `,pe.info({title:"文件属性",content:i,width:400})},Ae=l=>!1;De(()=>{O()});const Me=l=>{if(T.value){const i=document.querySelector(".context-menu");i&&!i.contains(l.target)&&(T.value=!1)}};return typeof document<"u"&&document.addEventListener("click",Me),{currentPath:o,breadcrumbs:e,fileList:n,loading:t,searchValue:r,selectedItems:F,showContextMenu:T,contextMenuPosition:C,contextMenuTarget:_,clipboardItem:h,clipboardAction:A,showUploadModal:k,showNewFolderModal:j,showRenameModal:M,showMoveCopyModal:B,showDeleteModal:D,renameForm:y,newFolderForm:x,filteredFileList:R,formatFileSize:z,formatDate:W,navigateToPath:$,refreshFiles:O,handleUpload:q,handleNewFolder:G,handleRename:Q,handleDelete:I,downloadFile:w,isImage:L,isText:U,isPDF:E,handleRowContextMenu:a,handleContextMenu:g,handleContextMenuAction:X,handleItemClick:xe,handleItemDoubleClick:Fe,handleSearch:_e,showRenameModal:M,showDeleteModal:D,showPropertiesModal:se,beforeUpload:Ae}}},bt={class:"personal-cloud"},Tt={class:"toolbar"},yt={class:"toolbar-left"},xt=["onClick"],Ft={class:"toolbar-actions"},_t={class:"toolbar-right"},At={class:"file-grid-container"},Mt={class:"file-grid"},zt=["onClick","onDblclick","onContextmenu"],St={class:"file-thumbnail"},Pt={class:"file-info"},Ct=["title"],Ht={class:"file-hover-info"},Vt={class:"hover-file-name"},kt={key:0,class:"hover-file-size"},jt={class:"hover-file-date"};function Dt(o,e,n,t,r,F){const T=d("a-breadcrumb-item"),C=d("a-breadcrumb"),_=d("UploadOutlined"),h=d("a-button"),A=d("FolderAddOutlined"),k=d("ReloadOutlined"),j=d("a-input-search"),M=d("FolderTwoTone"),B=d("FileImageTwoTone"),D=d("FileTextTwoTone"),y=d("FilePdfTwoTone"),x=d("FileTwoTone"),H=d("FolderOpenOutlined"),R=d("DownloadOutlined"),z=d("a-divider"),W=d("CopyOutlined"),$=d("ScissorOutlined"),O=d("SnippetsOutlined"),q=d("EditOutlined"),G=d("DeleteOutlined"),Q=d("InfoCircleOutlined"),I=d("a-upload"),w=d("a-modal"),L=d("a-input"),U=d("a-form-item"),E=d("a-form");return p(),S("div",bt,[c("div",Tt,[c("div",yt,[s(C,{class:"breadcrumb"},{default:u(()=>[(p(!0),S(de,null,ue(t.breadcrumbs,(a,g)=>(p(),P(T,{key:g},{default:u(()=>[c("a",{onClick:X=>t.navigateToPath(g)},V(a),9,xt)]),_:2},1024))),128))]),_:1}),c("div",Ft,[s(h,{type:"primary",onClick:e[0]||(e[0]=a=>t.showUploadModal=!0)},{icon:u(()=>[s(_)]),default:u(()=>[e[20]||(e[20]=N(" 上传文件 ",-1))]),_:1}),s(h,{onClick:e[1]||(e[1]=a=>t.showNewFolderModal=!0)},{icon:u(()=>[s(A)]),default:u(()=>[e[21]||(e[21]=N(" 新建文件夹 ",-1))]),_:1}),s(h,{onClick:t.refreshFiles},{icon:u(()=>[s(k)]),default:u(()=>[e[22]||(e[22]=N(" 刷新 ",-1))]),_:1},8,["onClick"])])]),c("div",_t,[s(j,{value:t.searchValue,"onUpdate:value":e[2]||(e[2]=a=>t.searchValue=a),placeholder:"搜索文件...",style:{width:"250px"},onSearch:t.handleSearch,onChange:t.handleSearch,"allow-clear":""},null,8,["value","onSearch","onChange"])])]),c("div",At,[c("div",Mt,[(p(!0),S(de,null,ue(t.filteredFileList,a=>(p(),S("div",{key:a.id,class:fe(["file-grid-item",{selected:t.selectedItems.includes(a.id)}]),onClick:g=>t.handleItemClick(a,g),onDblclick:g=>t.handleItemDoubleClick(a),onContextmenu:Ue(g=>t.handleRowContextMenu(a,g),["prevent"])},[c("div",St,[a.type==="folder"?(p(),P(M,{key:0,class:"file-icon folder-icon","two-tone-color":"#1890ff"})):t.isImage(a.name)?(p(),P(B,{key:1,class:"file-icon image-icon","two-tone-color":"#52c41a"})):t.isText(a.name)?(p(),P(D,{key:2,class:"file-icon text-icon","two-tone-color":"#722ed1"})):t.isPDF(a.name)?(p(),P(y,{key:3,class:"file-icon pdf-icon","two-tone-color":"#ff4d4f"})):(p(),P(x,{key:4,class:"file-icon file-icon","two-tone-color":"#fa8c16"}))]),c("div",Pt,[c("div",{class:"file-name",title:a.name},V(a.name),9,Ct)]),c("div",Ht,[c("div",Vt,V(a.name),1),a.type!=="folder"?(p(),S("div",kt,V(t.formatFileSize(a.size)),1)):me("",!0),c("div",jt,V(t.formatDate(a.updatedAt)),1)])],42,zt))),128))])]),t.showContextMenu?(p(),S("div",{key:0,class:"context-menu",style:Ie({left:t.contextMenuPosition.x+"px",top:t.contextMenuPosition.y+"px"}),onMouseleave:e[11]||(e[11]=a=>t.showContextMenu=!1)},[c("div",{class:"context-menu-item",onClick:e[3]||(e[3]=a=>t.handleContextMenuAction("open"))},[s(H),e[23]||(e[23]=c("span",null,"打开",-1))]),c("div",{class:"context-menu-item",onClick:e[4]||(e[4]=a=>t.handleContextMenuAction("download"))},[s(R),e[24]||(e[24]=c("span",null,"下载",-1))]),s(z,{style:{margin:"4px 0"}}),c("div",{class:"context-menu-item",onClick:e[5]||(e[5]=a=>t.handleContextMenuAction("copy"))},[s(W),e[25]||(e[25]=c("span",null,"复制",-1))]),c("div",{class:"context-menu-item",onClick:e[6]||(e[6]=a=>t.handleContextMenuAction("cut"))},[s($),e[26]||(e[26]=c("span",null,"剪切",-1))]),c("div",{class:fe(["context-menu-item",{disabled:!t.clipboardItem}]),onClick:e[7]||(e[7]=a=>t.handleContextMenuAction("paste"))},[s(O),e[27]||(e[27]=c("span",null,"粘贴",-1))],2),s(z,{style:{margin:"4px 0"}}),c("div",{class:"context-menu-item",onClick:e[8]||(e[8]=a=>t.handleContextMenuAction("rename"))},[s(q),e[28]||(e[28]=c("span",null,"重命名",-1))]),c("div",{class:"context-menu-item",onClick:e[9]||(e[9]=a=>t.handleContextMenuAction("delete"))},[s(G),e[29]||(e[29]=c("span",null,"删除",-1))]),s(z,{style:{margin:"4px 0"}}),c("div",{class:"context-menu-item",onClick:e[10]||(e[10]=a=>t.handleContextMenuAction("properties"))},[s(Q),e[30]||(e[30]=c("span",null,"属性",-1))])],36)):me("",!0),s(w,{open:t.showUploadModal,"onUpdate:open":e[12]||(e[12]=a=>t.showUploadModal=a),title:"上传文件",onOk:t.handleUpload,onCancel:e[13]||(e[13]=a=>t.showUploadModal=!1)},{default:u(()=>[s(I,{"file-list":t.fileList,"before-upload":t.beforeUpload,multiple:""},{default:u(()=>[s(h,null,{default:u(()=>[s(_),e[31]||(e[31]=N(" 选择文件 ",-1))]),_:1})]),_:1},8,["file-list","before-upload"])]),_:1},8,["open","onOk"]),s(w,{open:t.showNewFolderModal,"onUpdate:open":e[15]||(e[15]=a=>t.showNewFolderModal=a),title:"新建文件夹",onOk:t.handleNewFolder,onCancel:e[16]||(e[16]=a=>t.showNewFolderModal=!1)},{default:u(()=>[s(E,{model:t.newFolderForm,layout:"vertical"},{default:u(()=>[s(U,{label:"文件夹名称",required:""},{default:u(()=>[s(L,{value:t.newFolderForm.name,"onUpdate:value":e[14]||(e[14]=a=>t.newFolderForm.name=a),placeholder:"请输入文件夹名称"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","onOk"]),s(w,{open:t.showRenameModal,"onUpdate:open":e[18]||(e[18]=a=>t.showRenameModal=a),title:"重命名",onOk:t.handleRename,onCancel:e[19]||(e[19]=a=>t.showRenameModal=!1)},{default:u(()=>[s(E,{model:t.renameForm,layout:"vertical"},{default:u(()=>[s(U,{label:"新名称",required:""},{default:u(()=>[s(L,{value:t.renameForm.name,"onUpdate:value":e[17]||(e[17]=a=>t.renameForm.name=a),placeholder:"请输入新名称"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","onOk"])])}const Ut=Ee(wt,[["render",Dt],["__scopeId","data-v-32a9beb6"]]);export{Ut as default};
