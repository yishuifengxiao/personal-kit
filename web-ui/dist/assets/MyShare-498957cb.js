import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import{f as a,A as B,S as j,a4 as E,p as V,B as R,a as g,r as U,I as J,o as f,g as y,e as u,w as o,k as h,M as S,b as c,h as d,t as C,c as z,l as N}from"./index-507fc7e9.js";var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const q=Q;function P(r){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(s).filter(function(p){return Object.getOwnPropertyDescriptor(s,p).enumerable}))),t.forEach(function(p){F(r,p,s[p])})}return r}function F(r,e,s){return e in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s,r}var b=function(e,s){var t=P({},e,s.attrs);return a(B,P({},t,{icon:q}),null)};b.displayName="LinkOutlined";b.inheritAttrs=!1;const G=b;const H={name:"MyShare",components:{SearchOutlined:j,LinkOutlined:G,CopyOutlined:E,DeleteOutlined:V,CloseCircleOutlined:R},setup(){const r=g(!1),e=g(""),s=g(""),t=g([{id:1,name:"项目文档分享",status:"active",createTime:"2024-01-15 14:30:00",expireTime:"2024-02-15 14:30:00"},{id:2,name:"会议记录分享",status:"expired",createTime:"2024-01-10 10:20:00",expireTime:"2024-01-17 10:20:00"},{id:3,name:"设计稿分享",status:"active",createTime:"2024-01-12 16:45:00",expireTime:"2024-02-12 16:45:00"},{id:4,name:"代码示例分享",status:"cancelled",createTime:"2024-01-08 09:15:00",expireTime:"2024-02-08 09:15:00"},{id:5,name:"培训资料分享",status:"active",createTime:"2024-01-14 13:00:00",expireTime:"2024-02-14 13:00:00"}]),p=[{title:"分享名称",dataIndex:"name",key:"name",width:"30%"},{title:"状态",dataIndex:"status",key:"status",width:"15%"},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:"20%"},{title:"失效时间",dataIndex:"expireTime",key:"expireTime",width:"20%"},{title:"操作",key:"action",width:"15%"}],v=U({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(n,l)=>`${l[0]}-${l[1]} 共 ${n} 条`}),x=J(()=>{let n=t.value;return e.value&&(n=n.filter(l=>l.name.toLowerCase().includes(e.value.toLowerCase()))),s.value&&(n=n.filter(l=>l.status===s.value)),v.total=n.length,n});return{loading:r,searchName:e,searchStatus:s,shareData:t,columns:p,paginationConfig:v,filteredData:x,getStatusColor:n=>({active:"green",expired:"red",cancelled:"orange"})[n]||"default",getStatusText:n=>({active:"有效",expired:"失效",cancelled:"取消"})[n]||n,handleSearch:()=>{v.current=1,h.success("搜索完成")},handleReset:()=>{e.value="",s.value="",v.current=1,h.success("搜索条件已重置")},handleCancel:n=>{S.confirm({title:"确认取消分享",content:`确定要取消分享 "${n.name}" 吗？`,onOk(){const l=t.value.findIndex(i=>i.id===n.id);l!==-1&&(t.value[l].status="cancelled",h.success("分享已取消"))}})},handleCopyLink:n=>{const l=`${window.location.origin}/share/${n.id}`;navigator.clipboard.writeText(l).then(()=>{h.success("分享链接已复制到剪贴板")}).catch(()=>{h.error("复制链接失败")})},handleDelete:n=>{S.confirm({title:"确认删除",content:`确定要删除分享记录 "${n.name}" 吗？`,onOk(){const l=t.value.findIndex(i=>i.id===n.id);l!==-1&&(t.value.splice(l,1),h.success("分享记录已删除"))}})},handleClearAll:()=>{S.confirm({title:"确认清空记录",content:"确定要清空所有分享记录吗？此操作不可恢复。",onOk(){t.value=[],h.success("分享记录已清空")}})}}}},W={class:"my-share-container"},X={class:"toolbar"},Y={class:"toolbar-left"},Z={class:"search-item"},$={class:"search-item"},K={class:"search-buttons"},ee={class:"toolbar-right"},te={class:"share-list"},ne={key:0,class:"share-name"},ae={key:2},le={key:3},se={key:4,class:"action-buttons"};function ie(r,e,s,t,p,v){const x=c("a-input"),k=c("a-select-option"),T=c("a-select"),w=c("SearchOutlined"),_=c("a-button"),O=c("DeleteOutlined"),L=c("LinkOutlined"),D=c("a-tag"),M=c("CloseCircleOutlined"),n=c("CopyOutlined"),l=c("a-table");return f(),y("div",W,[u("div",X,[u("div",Y,[u("div",Z,[e[2]||(e[2]=u("span",{class:"search-label"},"名称：",-1)),a(x,{value:t.searchName,"onUpdate:value":e[0]||(e[0]=i=>t.searchName=i),placeholder:"请输入分享名称",style:{width:"200px"},onPressEnter:t.handleSearch},null,8,["value","onPressEnter"])]),u("div",$,[e[7]||(e[7]=u("span",{class:"search-label"},"状态：",-1)),a(T,{value:t.searchStatus,"onUpdate:value":e[1]||(e[1]=i=>t.searchStatus=i),placeholder:"请选择状态",style:{width:"150px"}},{default:o(()=>[a(k,{value:""},{default:o(()=>[...e[3]||(e[3]=[d("全部",-1)])]),_:1}),a(k,{value:"active"},{default:o(()=>[...e[4]||(e[4]=[d("有效",-1)])]),_:1}),a(k,{value:"expired"},{default:o(()=>[...e[5]||(e[5]=[d("失效",-1)])]),_:1}),a(k,{value:"cancelled"},{default:o(()=>[...e[6]||(e[6]=[d("取消",-1)])]),_:1})]),_:1},8,["value"])]),u("div",K,[a(_,{type:"primary",onClick:t.handleSearch},{default:o(()=>[a(w),e[8]||(e[8]=d(" 确定 ",-1))]),_:1},8,["onClick"]),a(_,{onClick:t.handleReset,style:{"margin-left":"8px"}},{default:o(()=>[...e[9]||(e[9]=[d(" 重置 ",-1)])]),_:1},8,["onClick"])])]),u("div",ee,[a(_,{type:"link",danger:"",onClick:t.handleClearAll},{default:o(()=>[a(O),e[10]||(e[10]=d(" 清空记录 ",-1))]),_:1},8,["onClick"])])]),u("div",te,[a(l,{columns:t.columns,"data-source":t.filteredData,pagination:t.paginationConfig,loading:t.loading,"row-key":"id"},{bodyCell:o(({column:i,record:m})=>[i.key==="name"?(f(),y("div",ne,[a(L,{class:"share-icon"}),u("span",null,C(m.name),1)])):i.key==="status"?(f(),z(D,{key:1,color:t.getStatusColor(m.status)},{default:o(()=>[d(C(t.getStatusText(m.status)),1)]),_:2},1032,["color"])):i.key==="createTime"?(f(),y("span",ae,C(m.createTime),1)):i.key==="expireTime"?(f(),y("span",le,C(m.expireTime),1)):i.key==="action"?(f(),y("div",se,[m.status==="active"?(f(),z(_,{key:0,type:"link",size:"small",onClick:I=>t.handleCancel(m)},{default:o(()=>[a(M),e[11]||(e[11]=d(" 取消分享 ",-1))]),_:1},8,["onClick"])):N("",!0),a(_,{type:"link",size:"small",onClick:I=>t.handleCopyLink(m)},{default:o(()=>[a(n),e[12]||(e[12]=d(" 复制链接 ",-1))]),_:1},8,["onClick"]),a(_,{type:"link",danger:"",size:"small",onClick:I=>t.handleDelete(m)},{default:o(()=>[a(O),e[13]||(e[13]=d(" 删除记录 ",-1))]),_:1},8,["onClick"])])):N("",!0)]),_:1},8,["columns","data-source","pagination","loading"])])])}const ce=A(H,[["render",ie],["__scopeId","data-v-dd34dda0"]]);export{ce as default};
